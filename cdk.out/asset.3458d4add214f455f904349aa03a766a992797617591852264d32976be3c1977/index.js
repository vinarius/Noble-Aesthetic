var xd=Object.create;var Sr=Object.defineProperty,Ud=Object.defineProperties,Fd=Object.getOwnPropertyDescriptor,Vd=Object.getOwnPropertyDescriptors,Jd=Object.getOwnPropertyNames,an=Object.getOwnPropertySymbols,Ld=Object.getPrototypeOf,bs=Object.prototype.hasOwnProperty,Xa=Object.prototype.propertyIsEnumerable;var Qa=(t,e,r)=>e in t?Sr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,P=(t,e)=>{for(var r in e||(e={}))bs.call(e,r)&&Qa(t,r,e[r]);if(an)for(var r of an(e))Xa.call(e,r)&&Qa(t,r,e[r]);return t},ee=(t,e)=>Ud(t,Vd(e)),Za=t=>Sr(t,"__esModule",{value:!0});var eo=(t,e)=>{var r={};for(var n in t)bs.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&an)for(var n of an(t))e.indexOf(n)<0&&Xa.call(t,n)&&(r[n]=t[n]);return r};var w=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Bd=(t,e)=>{for(var r in e)Sr(t,r,{get:e[r],enumerable:!0})},to=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Jd(e))!bs.call(t,s)&&(r||s!=="default")&&Sr(t,s,{get:()=>e[s],enumerable:!(n=Fd(e,s))||n.enumerable});return t},ro=(t,e)=>to(Za(Sr(t!=null?xd(Ld(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),Kd=(t=>(e,r)=>t&&t.get(e)||(r=to(Za({}),e,1),t&&t.set(e,r),r))(typeof WeakMap!="undefined"?new WeakMap:0);var Vs=w((kv,dn)=>{var Eo,So,To,bo,Ro,Po,Oo,Co,No,cn,Fs,Io,Ao,ko,tr,Do,qo,jo,Mo,xo,Uo,Fo,Vo,ln;(function(t){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){t(r(e,r(n)))}):typeof dn=="object"&&typeof dn.exports=="object"?t(r(e,r(dn.exports))):t(r(e));function r(n,s){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(i,a){return n[i]=s?s(i,a):a}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])};Eo=function(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(n,s);function i(){this.constructor=n}n.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)},So=Object.assign||function(n){for(var s,i=1,a=arguments.length;i<a;i++){s=arguments[i];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])}return n},To=function(n,s){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&s.indexOf(a)<0&&(i[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)s.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(i[a[o]]=n[a[o]]);return i},bo=function(n,s,i,a){var o=arguments.length,u=o<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,i):a,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,s,i,a);else for(var f=n.length-1;f>=0;f--)(l=n[f])&&(u=(o<3?l(u):o>3?l(s,i,u):l(s,i))||u);return o>3&&u&&Object.defineProperty(s,i,u),u},Ro=function(n,s){return function(i,a){s(i,a,n)}},Po=function(n,s){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,s)},Oo=function(n,s,i,a){function o(u){return u instanceof i?u:new i(function(l){l(u)})}return new(i||(i=Promise))(function(u,l){function f($){try{_(a.next($))}catch(g){l(g)}}function h($){try{_(a.throw($))}catch(g){l(g)}}function _($){$.done?u($.value):o($.value).then(f,h)}_((a=a.apply(n,s||[])).next())})},Co=function(n,s){var i={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},a,o,u,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(_){return function($){return h([_,$])}}function h(_){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,o&&(u=_[0]&2?o.return:_[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,_[1])).done)return u;switch(o=0,u&&(_=[_[0]&2,u.value]),_[0]){case 0:case 1:u=_;break;case 4:return i.label++,{value:_[1],done:!1};case 5:i.label++,o=_[1],_=[0];continue;case 7:_=i.ops.pop(),i.trys.pop();continue;default:if(u=i.trys,!(u=u.length>0&&u[u.length-1])&&(_[0]===6||_[0]===2)){i=0;continue}if(_[0]===3&&(!u||_[1]>u[0]&&_[1]<u[3])){i.label=_[1];break}if(_[0]===6&&i.label<u[1]){i.label=u[1],u=_;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(_);break}u[2]&&i.ops.pop(),i.trys.pop();continue}_=s.call(n,i)}catch($){_=[6,$],o=0}finally{a=u=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},No=function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&ln(s,n,i)},ln=Object.create?function(n,s,i,a){a===void 0&&(a=i),Object.defineProperty(n,a,{enumerable:!0,get:function(){return s[i]}})}:function(n,s,i,a){a===void 0&&(a=i),n[a]=s[i]},cn=function(n){var s=typeof Symbol=="function"&&Symbol.iterator,i=s&&n[s],a=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},Fs=function(n,s){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var a=i.call(n),o,u=[],l;try{for(;(s===void 0||s-- >0)&&!(o=a.next()).done;)u.push(o.value)}catch(f){l={error:f}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(l)throw l.error}}return u},Io=function(){for(var n=[],s=0;s<arguments.length;s++)n=n.concat(Fs(arguments[s]));return n},Ao=function(){for(var n=0,s=0,i=arguments.length;s<i;s++)n+=arguments[s].length;for(var a=Array(n),o=0,s=0;s<i;s++)for(var u=arguments[s],l=0,f=u.length;l<f;l++,o++)a[o]=u[l];return a},ko=function(n,s,i){if(i||arguments.length===2)for(var a=0,o=s.length,u;a<o;a++)(u||!(a in s))&&(u||(u=Array.prototype.slice.call(s,0,a)),u[a]=s[a]);return n.concat(u||Array.prototype.slice.call(s))},tr=function(n){return this instanceof tr?(this.v=n,this):new tr(n)},Do=function(n,s,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=i.apply(n,s||[]),o,u=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(v){a[v]&&(o[v]=function(E){return new Promise(function(S,R){u.push([v,E,S,R])>1||f(v,E)})})}function f(v,E){try{h(a[v](E))}catch(S){g(u[0][3],S)}}function h(v){v.value instanceof tr?Promise.resolve(v.value.v).then(_,$):g(u[0][2],v)}function _(v){f("next",v)}function $(v){f("throw",v)}function g(v,E){v(E),u.shift(),u.length&&f(u[0][0],u[0][1])}},qo=function(n){var s,i;return s={},a("next"),a("throw",function(o){throw o}),a("return"),s[Symbol.iterator]=function(){return this},s;function a(o,u){s[o]=n[o]?function(l){return(i=!i)?{value:tr(n[o](l)),done:o==="return"}:u?u(l):l}:u}},jo=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n[Symbol.asyncIterator],i;return s?s.call(n):(n=typeof cn=="function"?cn(n):n[Symbol.iterator](),i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i);function a(u){i[u]=n[u]&&function(l){return new Promise(function(f,h){l=n[u](l),o(f,h,l.done,l.value)})}}function o(u,l,f,h){Promise.resolve(h).then(function(_){u({value:_,done:f})},l)}},Mo=function(n,s){return Object.defineProperty?Object.defineProperty(n,"raw",{value:s}):n.raw=s,n};var r=Object.create?function(n,s){Object.defineProperty(n,"default",{enumerable:!0,value:s})}:function(n,s){n.default=s};xo=function(n){if(n&&n.__esModule)return n;var s={};if(n!=null)for(var i in n)i!=="default"&&Object.prototype.hasOwnProperty.call(n,i)&&ln(s,n,i);return r(s,n),s},Uo=function(n){return n&&n.__esModule?n:{default:n}},Fo=function(n,s,i,a){if(i==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?n!==s||!a:!s.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?a:i==="a"?a.call(n):a?a.value:s.get(n)},Vo=function(n,s,i,a,o){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof s=="function"?n!==s||!o:!s.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?o.call(n,i):o?o.value=i:s.set(n,i),i},t("__extends",Eo),t("__assign",So),t("__rest",To),t("__decorate",bo),t("__param",Ro),t("__metadata",Po),t("__awaiter",Oo),t("__generator",Co),t("__exportStar",No),t("__createBinding",ln),t("__values",cn),t("__read",Fs),t("__spread",Io),t("__spreadArrays",Ao),t("__spreadArray",ko),t("__await",tr),t("__asyncGenerator",Do),t("__asyncDelegator",qo),t("__asyncValues",jo),t("__makeTemplateObject",Mo),t("__importStar",xo),t("__importDefault",Uo),t("__classPrivateFieldGet",Fo),t("__classPrivateFieldSet",Vo)})});var Or=w(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.DEFAULT_RETRY_MODE=at.DEFAULT_MAX_ATTEMPTS=at.RETRY_MODES=void 0;var Jo;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(Jo=at.RETRY_MODES||(at.RETRY_MODES={}));at.DEFAULT_MAX_ATTEMPTS=3;at.DEFAULT_RETRY_MODE=Jo.STANDARD});var Lo=w(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.TRANSIENT_ERROR_STATUS_CODES=Be.TRANSIENT_ERROR_CODES=Be.THROTTLING_ERROR_CODES=Be.CLOCK_SKEW_ERROR_CODES=void 0;Be.CLOCK_SKEW_ERROR_CODES=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"];Be.THROTTLING_ERROR_CODES=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"];Be.TRANSIENT_ERROR_CODES=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"];Be.TRANSIENT_ERROR_STATUS_CODES=[500,502,503,504]});var pn=w(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.isTransientError=Ke.isThrottlingError=Ke.isClockSkewError=Ke.isRetryableByTrait=void 0;var fn=Lo(),sf=t=>t.$retryable!==void 0;Ke.isRetryableByTrait=sf;var af=t=>fn.CLOCK_SKEW_ERROR_CODES.includes(t.name);Ke.isClockSkewError=af;var of=t=>{var e,r;return((e=t.$metadata)===null||e===void 0?void 0:e.httpStatusCode)===429||fn.THROTTLING_ERROR_CODES.includes(t.name)||((r=t.$retryable)===null||r===void 0?void 0:r.throttling)==!0};Ke.isThrottlingError=of;var uf=t=>{var e;return fn.TRANSIENT_ERROR_CODES.includes(t.name)||fn.TRANSIENT_ERROR_STATUS_CODES.includes(((e=t.$metadata)===null||e===void 0?void 0:e.httpStatusCode)||0)};Ke.isTransientError=uf});var Js=w(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});hn.DefaultRateLimiter=void 0;var cf=pn(),Bo=class{constructor(e){var r,n,s,i,a;this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(r=e==null?void 0:e.beta)!==null&&r!==void 0?r:.7,this.minCapacity=(n=e==null?void 0:e.minCapacity)!==null&&n!==void 0?n:1,this.minFillRate=(s=e==null?void 0:e.minFillRate)!==null&&s!==void 0?s:.5,this.scaleConstant=(i=e==null?void 0:e.scaleConstant)!==null&&i!==void 0?i:.4,this.smooth=(a=e==null?void 0:e.smooth)!==null&&a!==void 0?a:.8;let o=this.getCurrentTimeInSeconds();this.lastThrottleTime=o,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(!!this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),cf.isThrottlingError(e)){let s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}};hn.DefaultRateLimiter=Bo});var Go=w(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0})});var Ho=w(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.HttpRequest=void 0;var mn=class{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.substr(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/"}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let e=new mn(ee(P({},this),{headers:P({},this.headers)}));return e.query&&(e.query=lf(e.query)),e}};yn.HttpRequest=mn;function lf(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return ee(P({},e),{[r]:Array.isArray(n)?[...n]:n})},{})}});var Wo=w(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.HttpResponse=void 0;var zo=class{constructor(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};_n.HttpResponse=zo});var Yo=w(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.isValidHostname=void 0;function df(t){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(t)}gn.isValidHostname=df});var Ls=w(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});var vn=Vs();vn.__exportStar(Go(),rr);vn.__exportStar(Ho(),rr);vn.__exportStar(Wo(),rr);vn.__exportStar(Yo(),rr)});var Ks=w(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});Bs.default=hf;var ff=pf(require("crypto"));function pf(t){return t&&t.__esModule?t:{default:t}}var wn=new Uint8Array(256),$n=wn.length;function hf(){return $n>wn.length-16&&(ff.default.randomFillSync(wn),$n=0),wn.slice($n,$n+=16)}});var Xo=w(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.default=void 0;var mf=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;En.default=mf});var Cr=w(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});Sn.default=void 0;var yf=_f(Xo());function _f(t){return t&&t.__esModule?t:{default:t}}function gf(t){return typeof t=="string"&&yf.default.test(t)}var vf=gf;Sn.default=vf});var Nr=w(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Tn.default=void 0;var wf=$f(Cr());function $f(t){return t&&t.__esModule?t:{default:t}}var oe=[];for(let t=0;t<256;++t)oe.push((t+256).toString(16).substr(1));function Ef(t,e=0){let r=(oe[t[e+0]]+oe[t[e+1]]+oe[t[e+2]]+oe[t[e+3]]+"-"+oe[t[e+4]]+oe[t[e+5]]+"-"+oe[t[e+6]]+oe[t[e+7]]+"-"+oe[t[e+8]]+oe[t[e+9]]+"-"+oe[t[e+10]]+oe[t[e+11]]+oe[t[e+12]]+oe[t[e+13]]+oe[t[e+14]]+oe[t[e+15]]).toLowerCase();if(!(0,wf.default)(r))throw TypeError("Stringified UUID is invalid");return r}var Sf=Ef;Tn.default=Sf});var eu=w(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.default=void 0;var Tf=Qo(Ks()),bf=Qo(Nr());function Qo(t){return t&&t.__esModule?t:{default:t}}var Zo,Gs,Hs=0,zs=0;function Rf(t,e,r){let n=e&&r||0,s=e||new Array(16);t=t||{};let i=t.node||Zo,a=t.clockseq!==void 0?t.clockseq:Gs;if(i==null||a==null){let _=t.random||(t.rng||Tf.default)();i==null&&(i=Zo=[_[0]|1,_[1],_[2],_[3],_[4],_[5]]),a==null&&(a=Gs=(_[6]<<8|_[7])&16383)}let o=t.msecs!==void 0?t.msecs:Date.now(),u=t.nsecs!==void 0?t.nsecs:zs+1,l=o-Hs+(u-zs)/1e4;if(l<0&&t.clockseq===void 0&&(a=a+1&16383),(l<0||o>Hs)&&t.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Hs=o,zs=u,Gs=a,o+=122192928e5;let f=((o&268435455)*1e4+u)%4294967296;s[n++]=f>>>24&255,s[n++]=f>>>16&255,s[n++]=f>>>8&255,s[n++]=f&255;let h=o/4294967296*1e4&268435455;s[n++]=h>>>8&255,s[n++]=h&255,s[n++]=h>>>24&15|16,s[n++]=h>>>16&255,s[n++]=a>>>8|128,s[n++]=a&255;for(let _=0;_<6;++_)s[n+_]=i[_];return e||(0,bf.default)(s)}var Pf=Rf;bn.default=Pf});var Ws=w(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.default=void 0;var Of=Cf(Cr());function Cf(t){return t&&t.__esModule?t:{default:t}}function Nf(t){if(!(0,Of.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var If=Nf;Rn.default=If});var Ys=w(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.default=qf;It.URL=It.DNS=void 0;var Af=tu(Nr()),kf=tu(Ws());function tu(t){return t&&t.__esModule?t:{default:t}}function Df(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var ru="6ba7b810-9dad-11d1-80b4-00c04fd430c8";It.DNS=ru;var nu="6ba7b811-9dad-11d1-80b4-00c04fd430c8";It.URL=nu;function qf(t,e,r){function n(s,i,a,o){if(typeof s=="string"&&(s=Df(s)),typeof i=="string"&&(i=(0,kf.default)(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+s.length);if(u.set(i),u.set(s,i.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,a){o=o||0;for(let l=0;l<16;++l)a[o+l]=u[l];return a}return(0,Af.default)(u)}try{n.name=t}catch{}return n.DNS=ru,n.URL=nu,n}});var su=w(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.default=void 0;var jf=Mf(require("crypto"));function Mf(t){return t&&t.__esModule?t:{default:t}}function xf(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),jf.default.createHash("md5").update(t).digest()}var Uf=xf;Pn.default=Uf});var au=w(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.default=void 0;var Ff=iu(Ys()),Vf=iu(su());function iu(t){return t&&t.__esModule?t:{default:t}}var Jf=(0,Ff.default)("v3",48,Vf.default),Lf=Jf;On.default=Lf});var uu=w(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.default=void 0;var Bf=ou(Ks()),Kf=ou(Nr());function ou(t){return t&&t.__esModule?t:{default:t}}function Gf(t,e,r){t=t||{};let n=t.random||(t.rng||Bf.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let s=0;s<16;++s)e[r+s]=n[s];return e}return(0,Kf.default)(n)}var Hf=Gf;Cn.default=Hf});var cu=w(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.default=void 0;var zf=Wf(require("crypto"));function Wf(t){return t&&t.__esModule?t:{default:t}}function Yf(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),zf.default.createHash("sha1").update(t).digest()}var Xf=Yf;Nn.default=Xf});var du=w(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.default=void 0;var Qf=lu(Ys()),Zf=lu(cu());function lu(t){return t&&t.__esModule?t:{default:t}}var ep=(0,Qf.default)("v5",80,Zf.default),tp=ep;In.default=tp});var fu=w(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.default=void 0;var rp="00000000-0000-0000-0000-000000000000";An.default=rp});var pu=w(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.default=void 0;var np=sp(Cr());function sp(t){return t&&t.__esModule?t:{default:t}}function ip(t){if(!(0,np.default)(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}var ap=ip;kn.default=ap});var hu=w(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});Object.defineProperty(De,"v1",{enumerable:!0,get:function(){return op.default}});Object.defineProperty(De,"v3",{enumerable:!0,get:function(){return up.default}});Object.defineProperty(De,"v4",{enumerable:!0,get:function(){return cp.default}});Object.defineProperty(De,"v5",{enumerable:!0,get:function(){return lp.default}});Object.defineProperty(De,"NIL",{enumerable:!0,get:function(){return dp.default}});Object.defineProperty(De,"version",{enumerable:!0,get:function(){return fp.default}});Object.defineProperty(De,"validate",{enumerable:!0,get:function(){return pp.default}});Object.defineProperty(De,"stringify",{enumerable:!0,get:function(){return hp.default}});Object.defineProperty(De,"parse",{enumerable:!0,get:function(){return mp.default}});var op=ot(eu()),up=ot(au()),cp=ot(uu()),lp=ot(du()),dp=ot(fu()),fp=ot(pu()),pp=ot(Cr()),hp=ot(Nr()),mp=ot(Ws());function ot(t){return t&&t.__esModule?t:{default:t}}});var Ir=w(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.REQUEST_HEADER=se.INVOCATION_ID_HEADER=se.NO_RETRY_INCREMENT=se.TIMEOUT_RETRY_COST=se.RETRY_COST=se.INITIAL_RETRY_TOKENS=se.THROTTLING_RETRY_DELAY_BASE=se.MAXIMUM_RETRY_DELAY=se.DEFAULT_RETRY_DELAY_BASE=void 0;se.DEFAULT_RETRY_DELAY_BASE=100;se.MAXIMUM_RETRY_DELAY=20*1e3;se.THROTTLING_RETRY_DELAY_BASE=500;se.INITIAL_RETRY_TOKENS=500;se.RETRY_COST=5;se.TIMEOUT_RETRY_COST=10;se.NO_RETRY_INCREMENT=1;se.INVOCATION_ID_HEADER="amz-sdk-invocation-id";se.REQUEST_HEADER="amz-sdk-request"});var mu=w(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Dn.getDefaultRetryQuota=void 0;var Xs=Ir(),yp=(t,e)=>{var r,n,s;let i=t,a=(r=e==null?void 0:e.noRetryIncrement)!==null&&r!==void 0?r:Xs.NO_RETRY_INCREMENT,o=(n=e==null?void 0:e.retryCost)!==null&&n!==void 0?n:Xs.RETRY_COST,u=(s=e==null?void 0:e.timeoutRetryCost)!==null&&s!==void 0?s:Xs.TIMEOUT_RETRY_COST,l=t,f=g=>g.name==="TimeoutError"?u:o,h=g=>f(g)<=l;return Object.freeze({hasRetryTokens:h,retrieveRetryTokens:g=>{if(!h(g))throw new Error("No retry token available");let v=f(g);return l-=v,v},releaseRetryTokens:g=>{l+=g??a,l=Math.min(l,i)}})};Dn.getDefaultRetryQuota=yp});var Qs=w(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});qn.defaultDelayDecider=void 0;var _p=Ir(),gp=(t,e)=>Math.floor(Math.min(_p.MAXIMUM_RETRY_DELAY,Math.random()*2**e*t));qn.defaultDelayDecider=gp});var Zs=w(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});Mn.defaultRetryDecider=void 0;var jn=pn(),vp=t=>t?jn.isRetryableByTrait(t)||jn.isClockSkewError(t)||jn.isThrottlingError(t)||jn.isTransientError(t):!1;Mn.defaultRetryDecider=vp});var Un=w(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.StandardRetryStrategy=void 0;var yu=Ls(),wp=pn(),$p=hu(),_u=Or(),Ar=Ir(),Ep=mu(),Sp=Qs(),Tp=Zs(),gu=class{constructor(e,r){var n,s,i;this.maxAttemptsProvider=e,this.mode=_u.RETRY_MODES.STANDARD,this.retryDecider=(n=r==null?void 0:r.retryDecider)!==null&&n!==void 0?n:Tp.defaultRetryDecider,this.delayDecider=(s=r==null?void 0:r.delayDecider)!==null&&s!==void 0?s:Sp.defaultDelayDecider,this.retryQuota=(i=r==null?void 0:r.retryQuota)!==null&&i!==void 0?i:Ep.getDefaultRetryQuota(Ar.INITIAL_RETRY_TOKENS)}shouldRetry(e,r,n){return r<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)}async getMaxAttempts(){let e;try{e=await this.maxAttemptsProvider()}catch{e=_u.DEFAULT_MAX_ATTEMPTS}return e}async retry(e,r,n){let s,i=0,a=0,o=await this.getMaxAttempts(),{request:u}=r;for(yu.HttpRequest.isInstance(u)&&(u.headers[Ar.INVOCATION_ID_HEADER]=$p.v4());;)try{yu.HttpRequest.isInstance(u)&&(u.headers[Ar.REQUEST_HEADER]=`attempt=${i+1}; max=${o}`),(n==null?void 0:n.beforeRequest)&&await n.beforeRequest();let{response:l,output:f}=await e(r);return(n==null?void 0:n.afterRequest)&&n.afterRequest(l),this.retryQuota.releaseRetryTokens(s),f.$metadata.attempts=i+1,f.$metadata.totalRetryDelay=a,{response:l,output:f}}catch(l){let f=bp(l);if(i++,this.shouldRetry(f,i,o)){s=this.retryQuota.retrieveRetryTokens(f);let h=this.delayDecider(wp.isThrottlingError(f)?Ar.THROTTLING_RETRY_DELAY_BASE:Ar.DEFAULT_RETRY_DELAY_BASE,i);a+=h,await new Promise(_=>setTimeout(_,h));continue}throw f.$metadata||(f.$metadata={}),f.$metadata.attempts=i,f.$metadata.totalRetryDelay=a,f}}};xn.StandardRetryStrategy=gu;var bp=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`)});var ei=w(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.AdaptiveRetryStrategy=void 0;var Rp=Or(),Pp=Js(),Op=Un(),vu=class extends Op.StandardRetryStrategy{constructor(e,r){let i=r??{},{rateLimiter:n}=i,s=eo(i,["rateLimiter"]);super(e,s);this.rateLimiter=n??new Pp.DefaultRateLimiter,this.mode=Rp.RETRY_MODES.ADAPTIVE}async retry(e,r){return super.retry(e,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:n=>{this.rateLimiter.updateClientSendingRate(n)}})}};Fn.AdaptiveRetryStrategy=vu});var wu=w(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.NODE_RETRY_MODE_CONFIG_OPTIONS=Z.CONFIG_RETRY_MODE=Z.ENV_RETRY_MODE=Z.resolveRetryConfig=Z.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=Z.CONFIG_MAX_ATTEMPTS=Z.ENV_MAX_ATTEMPTS=void 0;var Cp=ei(),Vn=Or(),Np=Un();Z.ENV_MAX_ATTEMPTS="AWS_MAX_ATTEMPTS";Z.CONFIG_MAX_ATTEMPTS="max_attempts";Z.NODE_MAX_ATTEMPT_CONFIG_OPTIONS={environmentVariableSelector:t=>{let e=t[Z.ENV_MAX_ATTEMPTS];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Environment variable ${Z.ENV_MAX_ATTEMPTS} mast be a number, got "${e}"`);return r},configFileSelector:t=>{let e=t[Z.CONFIG_MAX_ATTEMPTS];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Shared config file entry ${Z.CONFIG_MAX_ATTEMPTS} mast be a number, got "${e}"`);return r},default:Vn.DEFAULT_MAX_ATTEMPTS};var Ip=t=>{let e=kp(t.maxAttempts);return ee(P({},t),{maxAttempts:e,retryStrategy:async()=>t.retryStrategy?t.retryStrategy:await Ap(t.retryMode)===Vn.RETRY_MODES.ADAPTIVE?new Cp.AdaptiveRetryStrategy(e):new Np.StandardRetryStrategy(e)})};Z.resolveRetryConfig=Ip;var Ap=async t=>typeof t=="string"?t:await t(),kp=(t=Vn.DEFAULT_MAX_ATTEMPTS)=>{if(typeof t=="number"){let e=Promise.resolve(t);return()=>e}return t};Z.ENV_RETRY_MODE="AWS_RETRY_MODE";Z.CONFIG_RETRY_MODE="retry_mode";Z.NODE_RETRY_MODE_CONFIG_OPTIONS={environmentVariableSelector:t=>t[Z.ENV_RETRY_MODE],configFileSelector:t=>t[Z.CONFIG_RETRY_MODE],default:Vn.DEFAULT_RETRY_MODE}});var Eu=w(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.getOmitRetryHeadersPlugin=Ge.omitRetryHeadersMiddlewareOptions=Ge.omitRetryHeadersMiddleware=void 0;var Dp=Ls(),$u=Ir(),qp=()=>t=>async e=>{let{request:r}=e;return Dp.HttpRequest.isInstance(r)&&(delete r.headers[$u.INVOCATION_ID_HEADER],delete r.headers[$u.REQUEST_HEADER]),t(e)};Ge.omitRetryHeadersMiddleware=qp;Ge.omitRetryHeadersMiddlewareOptions={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0};var jp=t=>({applyToStack:e=>{e.addRelativeTo(Ge.omitRetryHeadersMiddleware(),Ge.omitRetryHeadersMiddlewareOptions)}});Ge.getOmitRetryHeadersPlugin=jp});var Su=w(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.getRetryPlugin=He.retryMiddlewareOptions=He.retryMiddleware=void 0;var Mp=t=>(e,r)=>async n=>{let s=await t.retryStrategy();return(s==null?void 0:s.mode)&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,n)};He.retryMiddleware=Mp;He.retryMiddlewareOptions={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0};var xp=t=>({applyToStack:e=>{e.add(He.retryMiddleware(t),He.retryMiddlewareOptions)}});He.getRetryPlugin=xp});var bu=w(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0})});var Ru=w(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});var ze=Vs();ze.__exportStar(ei(),Ce);ze.__exportStar(Js(),Ce);ze.__exportStar(Un(),Ce);ze.__exportStar(Or(),Ce);ze.__exportStar(wu(),Ce);ze.__exportStar(Qs(),Ce);ze.__exportStar(Eu(),Ce);ze.__exportStar(Zs(),Ce);ze.__exportStar(Su(),Ce);ze.__exportStar(bu(),Ce)});var Dr=w(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.regexpCode=V.getProperty=V.safeStringify=V.stringify=V.strConcat=V.addCodeArg=V.str=V._=V.nil=V._Code=V.Name=V.IDENTIFIER=V._CodeOrName=void 0;var Jn=class{};V._CodeOrName=Jn;V.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var nr=class extends Jn{constructor(e){super();if(!V.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};V.Name=nr;var We=class extends Jn{constructor(e){super();this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof nr&&(r[n.str]=(r[n.str]||0)+1),r),{})}};V._Code=We;V.nil=new We("");function Nu(t,...e){let r=[t[0]],n=0;for(;n<e.length;)ri(r,e[n]),r.push(t[++n]);return new We(r)}V._=Nu;var ti=new We("+");function Iu(t,...e){let r=[kr(t[0])],n=0;for(;n<e.length;)r.push(ti),ri(r,e[n]),r.push(ti,kr(t[++n]));return Up(r),new We(r)}V.str=Iu;function ri(t,e){e instanceof We?t.push(...e._items):e instanceof nr?t.push(e):t.push(Jp(e))}V.addCodeArg=ri;function Up(t){let e=1;for(;e<t.length-1;){if(t[e]===ti){let r=Fp(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function Fp(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof nr||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof nr))return`"${t}${e.slice(1)}`}function Vp(t,e){return e.emptyStr()?t:t.emptyStr()?e:Iu`${t}${e}`}V.strConcat=Vp;function Jp(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:kr(Array.isArray(t)?t.join(","):t)}function Lp(t){return new We(kr(t))}V.stringify=Lp;function kr(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}V.safeStringify=kr;function Bp(t){return typeof t=="string"&&V.IDENTIFIER.test(t)?new We(`.${t}`):Nu`[${t}]`}V.getProperty=Bp;function Kp(t){return new We(t.toString())}V.regexpCode=Kp});var ai=w(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.ValueScope=me.ValueScopeName=me.Scope=me.varKinds=me.UsedValueState=void 0;var ve=Dr(),Au=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`);this.value=e.value}},ni;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(ni=me.UsedValueState||(me.UsedValueState={}));me.varKinds={const:new ve.Name("const"),let:new ve.Name("let"),var:new ve.Name("var")};var si=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof ve.Name?e:this.name(e)}name(e){return new ve.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0?void 0:n.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};me.Scope=si;var ii=class extends ve.Name{constructor(e,r){super(r);this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,ve._)`.${new ve.Name(r)}[${n}]`}};me.ValueScopeName=ii;var Gp=(0,ve._)`\n`,ku=class extends si{constructor(e){super(e);this._values={},this._scope=e.scope,this.opts=ee(P({},e),{_n:e.lines?Gp:ve.nil})}get(){return this._scope}name(e){return new ii(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:i}=s,a=(n=r.key)!==null&&n!==void 0?n:r.ref,o=this._values[i];if(o){let f=o.get(a);if(f)return f}else o=this._values[i]=new Map;o.set(a,s);let u=this._scope[i]||(this._scope[i]=[]),l=u.length;return u[l]=r.ref,s.setValue(r,{property:i,itemIndex:l}),s}getValue(e,r){let n=this._values[e];if(!!n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,ve._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let i=ve.nil;for(let a in e){let o=e[a];if(!o)continue;let u=n[a]=n[a]||new Map;o.forEach(l=>{if(u.has(l))return;u.set(l,ni.Started);let f=r(l);if(f){let h=this.opts.es5?me.varKinds.var:me.varKinds.const;i=(0,ve._)`${i}${h} ${l} = ${f};${this.opts._n}`}else if(f=s==null?void 0:s(l))i=(0,ve._)`${i}${f}${this.opts._n}`;else throw new Au(l);u.set(l,ni.Completed)})}return i}};me.ValueScope=ku});var k=w(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.or=I.and=I.not=I.CodeGen=I.operators=I.varKinds=I.ValueScopeName=I.ValueScope=I.Scope=I.Name=I.regexpCode=I.stringify=I.getProperty=I.nil=I.strConcat=I.str=I._=void 0;var D=Dr(),qe=ai(),pt=Dr();Object.defineProperty(I,"_",{enumerable:!0,get:function(){return pt._}});Object.defineProperty(I,"str",{enumerable:!0,get:function(){return pt.str}});Object.defineProperty(I,"strConcat",{enumerable:!0,get:function(){return pt.strConcat}});Object.defineProperty(I,"nil",{enumerable:!0,get:function(){return pt.nil}});Object.defineProperty(I,"getProperty",{enumerable:!0,get:function(){return pt.getProperty}});Object.defineProperty(I,"stringify",{enumerable:!0,get:function(){return pt.stringify}});Object.defineProperty(I,"regexpCode",{enumerable:!0,get:function(){return pt.regexpCode}});Object.defineProperty(I,"Name",{enumerable:!0,get:function(){return pt.Name}});var Ln=ai();Object.defineProperty(I,"Scope",{enumerable:!0,get:function(){return Ln.Scope}});Object.defineProperty(I,"ValueScope",{enumerable:!0,get:function(){return Ln.ValueScope}});Object.defineProperty(I,"ValueScopeName",{enumerable:!0,get:function(){return Ln.ValueScopeName}});Object.defineProperty(I,"varKinds",{enumerable:!0,get:function(){return Ln.varKinds}});I.operators={GT:new D._Code(">"),GTE:new D._Code(">="),LT:new D._Code("<"),LTE:new D._Code("<="),EQ:new D._Code("==="),NEQ:new D._Code("!=="),NOT:new D._Code("!"),OR:new D._Code("||"),AND:new D._Code("&&"),ADD:new D._Code("+")};var ht=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},Du=class extends ht{constructor(e,r,n){super();this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?qe.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(!!e[this.name.str])return this.rhs&&(this.rhs=ir(this.rhs,e,r)),this}get names(){return this.rhs instanceof D._CodeOrName?this.rhs.names:{}}},oi=class extends ht{constructor(e,r,n){super();this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof D.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=ir(this.rhs,e,r),this}get names(){let e=this.lhs instanceof D.Name?{}:P({},this.lhs.names);return Wn(e,this.rhs)}},qu=class extends oi{constructor(e,r,n,s){super(e,n,s);this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},ju=class extends ht{constructor(e){super();this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},Mu=class extends ht{constructor(e){super();this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},xu=class extends ht{constructor(e){super();this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},Uu=class extends ht{constructor(e){super();this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=ir(this.code,e,r),this}get names(){return this.code instanceof D._CodeOrName?this.code.names:{}}},Bn=class extends ht{constructor(e=[]){super();this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(e,r)||(Hp(e,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>At(e,r.names),{})}},mt=class extends Bn{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},Fu=class extends Bn{},qr=class extends mt{};qr.kind="else";var Ye=class extends mt{constructor(e,r){super(r);this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new qr(n):n}if(r)return e===!1?r instanceof Ye?r:r.nodes:this.nodes.length?this:new Ye(Ku(e),r instanceof Ye?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=ir(this.condition,e,r),this}get names(){let e=super.names;return Wn(e,this.condition),this.else&&At(e,this.else.names),e}};Ye.kind="if";var sr=class extends mt{};sr.kind="for";var Vu=class extends sr{constructor(e){super();this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(!!super.optimizeNames(e,r))return this.iteration=ir(this.iteration,e,r),this}get names(){return At(super.names,this.iteration.names)}},Ju=class extends sr{constructor(e,r,n,s){super();this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?qe.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(e)}get names(){let e=Wn(super.names,this.from);return Wn(e,this.to)}},ui=class extends sr{constructor(e,r,n,s){super();this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(!!super.optimizeNames(e,r))return this.iterable=ir(this.iterable,e,r),this}get names(){return At(super.names,this.iterable.names)}},Kn=class extends mt{constructor(e,r,n){super();this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};Kn.kind="func";var Gn=class extends Bn{render(e){return"return "+super.render(e)}};Gn.kind="return";var Lu=class extends mt{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&At(e,this.catch.names),this.finally&&At(e,this.finally.names),e}},Hn=class extends mt{constructor(e){super();this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};Hn.kind="catch";var zn=class extends mt{render(e){return"finally"+super.render(e)}};zn.kind="finally";var Bu=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts=ee(P({},r),{_n:r.lines?`
`:""}),this._extScope=e,this._scope=new qe.Scope({parent:e}),this._nodes=[new Fu]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new Du(e,i,n)),i}const(e,r,n){return this._def(qe.varKinds.const,e,r,n)}let(e,r,n){return this._def(qe.varKinds.let,e,r,n)}var(e,r,n){return this._def(qe.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new oi(e,r,n))}add(e,r){return this._leafNode(new qu(e,I.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==D.nil&&this._leafNode(new Uu(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,D.addCodeArg)(r,s));return r.push("}"),new D._Code(r)}if(e,r,n){if(this._blockNode(new Ye(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new Ye(e))}else(){return this._elseNode(new qr)}endIf(){return this._endBlockNode(Ye,qr)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new Vu(e),r)}forRange(e,r,n,s,i=this.opts.es5?qe.varKinds.var:qe.varKinds.let){let a=this._scope.toName(e);return this._for(new Ju(i,a,r,n),()=>s(a))}forOf(e,r,n,s=qe.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let a=r instanceof D.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,D._)`${a}.length`,o=>{this.var(i,(0,D._)`${a}[${o}]`),n(i)})}return this._for(new ui("of",s,i,r),()=>n(i))}forIn(e,r,n,s=this.opts.es5?qe.varKinds.var:qe.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,D._)`Object.keys(${r})`,n);let i=this._scope.toName(e);return this._for(new ui("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(sr)}label(e){return this._leafNode(new ju(e))}break(e){return this._leafNode(new Mu(e))}return(e){let r=new Gn;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Gn)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new Lu;if(this._blockNode(s),this.code(e),r){let i=this.name("e");this._currNode=s.catch=new Hn(i),r(i)}return n&&(this._currNode=s.finally=new zn,this.code(n)),this._endBlockNode(Hn,zn)}throw(e){return this._leafNode(new xu(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=D.nil,n,s){return this._blockNode(new Kn(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(Kn)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof Ye))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};I.CodeGen=Bu;function At(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function Wn(t,e){return e instanceof D._CodeOrName?At(t,e.names):t}function ir(t,e,r){if(t instanceof D.Name)return n(t);if(!s(t))return t;return new D._Code(t._items.reduce((i,a)=>(a instanceof D.Name&&(a=n(a)),a instanceof D._Code?i.push(...a._items):i.push(a),i),[]));function n(i){let a=r[i.str];return a===void 0||e[i.str]!==1?i:(delete e[i.str],a)}function s(i){return i instanceof D._Code&&i._items.some(a=>a instanceof D.Name&&e[a.str]===1&&r[a.str]!==void 0)}}function Hp(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function Ku(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,D._)`!${ci(t)}`}I.not=Ku;var zp=Gu(I.operators.AND);function Wp(...t){return t.reduce(zp)}I.and=Wp;var Yp=Gu(I.operators.OR);function Xp(...t){return t.reduce(Yp)}I.or=Xp;function Gu(t){return(e,r)=>e===D.nil?r:r===D.nil?e:(0,D._)`${ci(e)} ${t} ${ci(r)}`}function ci(t){return t instanceof D.Name?t:(0,D._)`(${t})`}});var U=w(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.checkStrictMode=A.getErrorPath=A.Type=A.useFunc=A.setEvaluated=A.evaluatedPropsToName=A.mergeEvaluated=A.eachItem=A.unescapeJsonPointer=A.escapeJsonPointer=A.escapeFragment=A.unescapeFragment=A.schemaRefOrVal=A.schemaHasRulesButRef=A.schemaHasRules=A.checkUnknownRules=A.alwaysValidSchema=A.toHash=void 0;var H=k(),Qp=Dr();function Zp(t){let e={};for(let r of t)e[r]=!0;return e}A.toHash=Zp;function eh(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(Hu(t,e),!zu(e,t.self.RULES.all))}A.alwaysValidSchema=eh;function Hu(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let i in e)s[i]||ec(t,`unknown keyword: "${i}"`)}A.checkUnknownRules=Hu;function zu(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}A.schemaHasRules=zu;function th(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}A.schemaHasRulesButRef=th;function rh({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,H._)`${r}`}return(0,H._)`${t}${e}${(0,H.getProperty)(n)}`}A.schemaRefOrVal=rh;function nh(t){return Wu(decodeURIComponent(t))}A.unescapeFragment=nh;function sh(t){return encodeURIComponent(li(t))}A.escapeFragment=sh;function li(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}A.escapeJsonPointer=li;function Wu(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}A.unescapeJsonPointer=Wu;function ih(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}A.eachItem=ih;function Yu({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,i,a,o)=>{let u=a===void 0?i:a instanceof H.Name?(i instanceof H.Name?t(s,i,a):e(s,i,a),a):i instanceof H.Name?(e(s,a,i),i):r(i,a);return o===H.Name&&!(u instanceof H.Name)?n(s,u):u}}A.mergeEvaluated={props:Yu({mergeNames:(t,e,r)=>t.if((0,H._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,H._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,H._)`${r} || {}`).code((0,H._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,H._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,H._)`${r} || {}`),di(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:P(P({},t),e),resultToName:Xu}),items:Yu({mergeNames:(t,e,r)=>t.if((0,H._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,H._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,H._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,H._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function Xu(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,H._)`{}`);return e!==void 0&&di(t,r,e),r}A.evaluatedPropsToName=Xu;function di(t,e,r){Object.keys(r).forEach(n=>t.assign((0,H._)`${e}${(0,H.getProperty)(n)}`,!0))}A.setEvaluated=di;var Qu={};function ah(t,e){return t.scopeValue("func",{ref:e,code:Qu[e.code]||(Qu[e.code]=new Qp._Code(e.code))})}A.useFunc=ah;var Zu;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(Zu=A.Type||(A.Type={}));function oh(t,e,r){if(t instanceof H.Name){let n=e===Zu.Num;return r?n?(0,H._)`"[" + ${t} + "]"`:(0,H._)`"['" + ${t} + "']"`:n?(0,H._)`"/" + ${t}`:(0,H._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,H.getProperty)(t).toString():"/"+li(t)}A.getErrorPath=oh;function ec(t,e,r=t.opts.strictSchema){if(!!r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}A.checkStrictMode=ec});var ut=w(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});var fe=k(),uh={data:new fe.Name("data"),valCxt:new fe.Name("valCxt"),instancePath:new fe.Name("instancePath"),parentData:new fe.Name("parentData"),parentDataProperty:new fe.Name("parentDataProperty"),rootData:new fe.Name("rootData"),dynamicAnchors:new fe.Name("dynamicAnchors"),vErrors:new fe.Name("vErrors"),errors:new fe.Name("errors"),this:new fe.Name("this"),self:new fe.Name("self"),scope:new fe.Name("scope"),json:new fe.Name("json"),jsonPos:new fe.Name("jsonPos"),jsonLen:new fe.Name("jsonLen"),jsonPart:new fe.Name("jsonPart")};fi.default=uh});var jr=w(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.extendErrors=pe.resetErrorsCount=pe.reportExtraError=pe.reportError=pe.keyword$DataError=pe.keywordError=void 0;var j=k(),Yn=U(),ye=ut();pe.keywordError={message:({keyword:t})=>(0,j.str)`must pass "${t}" keyword validation`};pe.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,j.str)`"${t}" keyword must be ${e} ($data)`:(0,j.str)`"${t}" keyword is invalid ($data)`};function ch(t,e=pe.keywordError,r,n){let{it:s}=t,{gen:i,compositeRule:a,allErrors:o}=s,u=nc(t,e,r);n??(a||o)?tc(i,u):rc(s,(0,j._)`[${u}]`)}pe.reportError=ch;function lh(t,e=pe.keywordError,r){let{it:n}=t,{gen:s,compositeRule:i,allErrors:a}=n,o=nc(t,e,r);tc(s,o),i||a||rc(n,ye.default.vErrors)}pe.reportExtraError=lh;function dh(t,e){t.assign(ye.default.errors,e),t.if((0,j._)`${ye.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,j._)`${ye.default.vErrors}.length`,e),()=>t.assign(ye.default.vErrors,null)))}pe.resetErrorsCount=dh;function fh({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let a=t.name("err");t.forRange("i",s,ye.default.errors,o=>{t.const(a,(0,j._)`${ye.default.vErrors}[${o}]`),t.if((0,j._)`${a}.instancePath === undefined`,()=>t.assign((0,j._)`${a}.instancePath`,(0,j.strConcat)(ye.default.instancePath,i.errorPath))),t.assign((0,j._)`${a}.schemaPath`,(0,j.str)`${i.errSchemaPath}/${e}`),i.opts.verbose&&(t.assign((0,j._)`${a}.schema`,r),t.assign((0,j._)`${a}.data`,n))})}pe.extendErrors=fh;function tc(t,e){let r=t.const("err",e);t.if((0,j._)`${ye.default.vErrors} === null`,()=>t.assign(ye.default.vErrors,(0,j._)`[${r}]`),(0,j._)`${ye.default.vErrors}.push(${r})`),t.code((0,j._)`${ye.default.errors}++`)}function rc(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,j._)`new ${t.ValidationError}(${e})`):(r.assign((0,j._)`${n}.errors`,e),r.return(!1))}var kt={keyword:new j.Name("keyword"),schemaPath:new j.Name("schemaPath"),params:new j.Name("params"),propertyName:new j.Name("propertyName"),message:new j.Name("message"),schema:new j.Name("schema"),parentSchema:new j.Name("parentSchema")};function nc(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,j._)`{}`:ph(t,e,r)}function ph(t,e,r={}){let{gen:n,it:s}=t,i=[hh(s,r),mh(t,r)];return yh(t,e,i),n.object(...i)}function hh({errorPath:t},{instancePath:e}){let r=e?(0,j.str)`${t}${(0,Yn.getErrorPath)(e,Yn.Type.Str)}`:t;return[ye.default.instancePath,(0,j.strConcat)(ye.default.instancePath,r)]}function mh({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,j.str)`${e}/${t}`;return r&&(s=(0,j.str)`${s}${(0,Yn.getErrorPath)(r,Yn.Type.Str)}`),[kt.schemaPath,s]}function yh(t,{params:e,message:r},n){let{keyword:s,data:i,schemaValue:a,it:o}=t,{opts:u,propertyName:l,topSchemaRef:f,schemaPath:h}=o;n.push([kt.keyword,s],[kt.params,typeof e=="function"?e(t):e||(0,j._)`{}`]),u.messages&&n.push([kt.message,typeof r=="function"?r(t):r]),u.verbose&&n.push([kt.schema,a],[kt.parentSchema,(0,j._)`${f}${h}`],[ye.default.data,i]),l&&n.push([kt.propertyName,l])}});var ic=w(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.boolOrEmptySchema=ar.topBoolOrEmptySchema=void 0;var _h=jr(),gh=k(),vh=ut(),wh={message:"boolean schema is false"};function $h(t){let{gen:e,schema:r,validateName:n}=t;r===!1?sc(t,!1):typeof r=="object"&&r.$async===!0?e.return(vh.default.data):(e.assign((0,gh._)`${n}.errors`,null),e.return(!0))}ar.topBoolOrEmptySchema=$h;function Eh(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),sc(t)):r.var(e,!0)}ar.boolOrEmptySchema=Eh;function sc(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,_h.reportError)(s,wh,void 0,e)}});var pi=w(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.getRules=or.isJSONType=void 0;var Sh=["string","number","integer","boolean","null","object","array"],Th=new Set(Sh);function bh(t){return typeof t=="string"&&Th.has(t)}or.isJSONType=bh;function Rh(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:ee(P({},t),{integer:!0,boolean:!0,null:!0}),rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}or.getRules=Rh});var hi=w(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.shouldUseRule=yt.shouldUseGroup=yt.schemaHasRulesForType=void 0;function Ph({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&ac(t,n)}yt.schemaHasRulesForType=Ph;function ac(t,e){return e.rules.some(r=>oc(t,r))}yt.shouldUseGroup=ac;function oc(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}yt.shouldUseRule=oc});var xr=w(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.reportTypeError=ue.checkDataTypes=ue.checkDataType=ue.coerceAndCheckDataType=ue.getJSONTypes=ue.getSchemaTypes=ue.DataType=void 0;var Oh=pi(),Ch=hi(),Nh=jr(),N=k(),uc=U(),Mr;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Mr=ue.DataType||(ue.DataType={}));function Ih(t){let e=cc(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}ue.getSchemaTypes=Ih;function cc(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(Oh.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}ue.getJSONTypes=cc;function Ah(t,e){let{gen:r,data:n,opts:s}=t,i=kh(e,s.coerceTypes),a=e.length>0&&!(i.length===0&&e.length===1&&(0,Ch.schemaHasRulesForType)(t,e[0]));if(a){let o=yi(e,n,s.strictNumbers,Mr.Wrong);r.if(o,()=>{i.length?Dh(t,e,i):_i(t)})}return a}ue.coerceAndCheckDataType=Ah;var lc=new Set(["string","number","integer","boolean","null"]);function kh(t,e){return e?t.filter(r=>lc.has(r)||e==="array"&&r==="array"):[]}function Dh(t,e,r){let{gen:n,data:s,opts:i}=t,a=n.let("dataType",(0,N._)`typeof ${s}`),o=n.let("coerced",(0,N._)`undefined`);i.coerceTypes==="array"&&n.if((0,N._)`${a} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,N._)`${s}[0]`).assign(a,(0,N._)`typeof ${s}`).if(yi(e,s,i.strictNumbers),()=>n.assign(o,s))),n.if((0,N._)`${o} !== undefined`);for(let l of r)(lc.has(l)||l==="array"&&i.coerceTypes==="array")&&u(l);n.else(),_i(t),n.endIf(),n.if((0,N._)`${o} !== undefined`,()=>{n.assign(s,o),qh(t,o)});function u(l){switch(l){case"string":n.elseIf((0,N._)`${a} == "number" || ${a} == "boolean"`).assign(o,(0,N._)`"" + ${s}`).elseIf((0,N._)`${s} === null`).assign(o,(0,N._)`""`);return;case"number":n.elseIf((0,N._)`${a} == "boolean" || ${s} === null
              || (${a} == "string" && ${s} && ${s} == +${s})`).assign(o,(0,N._)`+${s}`);return;case"integer":n.elseIf((0,N._)`${a} === "boolean" || ${s} === null
              || (${a} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(o,(0,N._)`+${s}`);return;case"boolean":n.elseIf((0,N._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(o,!1).elseIf((0,N._)`${s} === "true" || ${s} === 1`).assign(o,!0);return;case"null":n.elseIf((0,N._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(o,null);return;case"array":n.elseIf((0,N._)`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${s} === null`).assign(o,(0,N._)`[${s}]`)}}}function qh({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,N._)`${e} !== undefined`,()=>t.assign((0,N._)`${e}[${r}]`,n))}function mi(t,e,r,n=Mr.Correct){let s=n===Mr.Correct?N.operators.EQ:N.operators.NEQ,i;switch(t){case"null":return(0,N._)`${e} ${s} null`;case"array":i=(0,N._)`Array.isArray(${e})`;break;case"object":i=(0,N._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=a((0,N._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=a();break;default:return(0,N._)`typeof ${e} ${s} ${t}`}return n===Mr.Correct?i:(0,N.not)(i);function a(o=N.nil){return(0,N.and)((0,N._)`typeof ${e} == "number"`,o,r?(0,N._)`isFinite(${e})`:N.nil)}}ue.checkDataType=mi;function yi(t,e,r,n){if(t.length===1)return mi(t[0],e,r,n);let s,i=(0,uc.toHash)(t);if(i.array&&i.object){let a=(0,N._)`typeof ${e} != "object"`;s=i.null?a:(0,N._)`!${e} || ${a}`,delete i.null,delete i.array,delete i.object}else s=N.nil;i.number&&delete i.integer;for(let a in i)s=(0,N.and)(s,mi(a,e,r,n));return s}ue.checkDataTypes=yi;var jh={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,N._)`{type: ${t}}`:(0,N._)`{type: ${e}}`};function _i(t){let e=Mh(t);(0,Nh.reportError)(e,jh)}ue.reportTypeError=_i;function Mh(t){let{gen:e,data:r,schema:n}=t,s=(0,uc.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var fc=w(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.assignDefaults=void 0;var ur=k(),xh=U();function Uh(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)dc(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>dc(t,i,s.default))}Xn.assignDefaults=Uh;function dc(t,e,r){let{gen:n,compositeRule:s,data:i,opts:a}=t;if(r===void 0)return;let o=(0,ur._)`${i}${(0,ur.getProperty)(e)}`;if(s){(0,xh.checkStrictMode)(t,`default is ignored for: ${o}`);return}let u=(0,ur._)`${o} === undefined`;a.useDefaults==="empty"&&(u=(0,ur._)`${u} || ${o} === null || ${o} === ""`),n.if(u,(0,ur._)`${o} = ${(0,ur.stringify)(r)}`)}});var Ne=w(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.validateUnion=L.validateArray=L.usePattern=L.callValidateCode=L.schemaProperties=L.allSchemaProperties=L.noPropertyInData=L.propertyInData=L.isOwnProperty=L.hasPropFunc=L.reportMissingProp=L.checkMissingProp=L.checkReportMissingProp=void 0;var z=k(),gi=U(),_t=ut(),Fh=U();function Vh(t,e){let{gen:r,data:n,it:s}=t;r.if(wi(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,z._)`${e}`},!0),t.error()})}L.checkReportMissingProp=Vh;function Jh({gen:t,data:e,it:{opts:r}},n,s){return(0,z.or)(...n.map(i=>(0,z.and)(wi(t,e,i,r.ownProperties),(0,z._)`${s} = ${i}`)))}L.checkMissingProp=Jh;function Lh(t,e){t.setParams({missingProperty:e},!0),t.error()}L.reportMissingProp=Lh;function pc(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,z._)`Object.prototype.hasOwnProperty`})}L.hasPropFunc=pc;function vi(t,e,r){return(0,z._)`${pc(t)}.call(${e}, ${r})`}L.isOwnProperty=vi;function Bh(t,e,r,n){let s=(0,z._)`${e}${(0,z.getProperty)(r)} !== undefined`;return n?(0,z._)`${s} && ${vi(t,e,r)}`:s}L.propertyInData=Bh;function wi(t,e,r,n){let s=(0,z._)`${e}${(0,z.getProperty)(r)} === undefined`;return n?(0,z.or)(s,(0,z.not)(vi(t,e,r))):s}L.noPropertyInData=wi;function hc(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}L.allSchemaProperties=hc;function Kh(t,e){return hc(e).filter(r=>!(0,gi.alwaysValidSchema)(t,e[r]))}L.schemaProperties=Kh;function Gh({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:a},o,u,l){let f=l?(0,z._)`${t}, ${e}, ${n}${s}`:e,h=[[_t.default.instancePath,(0,z.strConcat)(_t.default.instancePath,i)],[_t.default.parentData,a.parentData],[_t.default.parentDataProperty,a.parentDataProperty],[_t.default.rootData,_t.default.rootData]];a.opts.dynamicRef&&h.push([_t.default.dynamicAnchors,_t.default.dynamicAnchors]);let _=(0,z._)`${f}, ${r.object(...h)}`;return u!==z.nil?(0,z._)`${o}.call(${u}, ${_})`:(0,z._)`${o}(${_})`}L.callValidateCode=Gh;var Hh=(0,z._)`new RegExp`;function zh({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,z._)`${s.code==="new RegExp"?Hh:(0,Fh.useFunc)(t,s)}(${r}, ${n})`})}L.usePattern=zh;function Wh(t){let{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){let o=e.let("valid",!0);return a(()=>e.assign(o,!1)),o}return e.var(i,!0),a(()=>e.break()),i;function a(o){let u=e.const("len",(0,z._)`${r}.length`);e.forRange("i",0,u,l=>{t.subschema({keyword:n,dataProp:l,dataPropType:gi.Type.Num},i),e.if((0,z.not)(i),o)})}}L.validateArray=Wh;function Yh(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(u=>(0,gi.alwaysValidSchema)(s,u))&&!s.opts.unevaluated)return;let a=e.let("valid",!1),o=e.name("_valid");e.block(()=>r.forEach((u,l)=>{let f=t.subschema({keyword:n,schemaProp:l,compositeRule:!0},o);e.assign(a,(0,z._)`${a} || ${o}`),t.mergeValidEvaluated(f,o)||e.if((0,z.not)(a))})),t.result(a,()=>t.reset(),()=>t.error(!0))}L.validateUnion=Yh});var _c=w(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.validateKeywordUsage=Xe.validSchemaType=Xe.funcKeywordCode=Xe.macroKeywordCode=void 0;var _e=k(),Dt=ut(),Xh=Ne(),Qh=jr();function Zh(t,e){let{gen:r,keyword:n,schema:s,parentSchema:i,it:a}=t,o=e.macro.call(a.self,s,i,a),u=yc(r,n,o);a.opts.validateSchema!==!1&&a.self.validateSchema(o,!0);let l=r.name("valid");t.subschema({schema:o,schemaPath:_e.nil,errSchemaPath:`${a.errSchemaPath}/${n}`,topSchemaRef:u,compositeRule:!0},l),t.pass(l,()=>t.error(!0))}Xe.macroKeywordCode=Zh;function em(t,e){var r;let{gen:n,keyword:s,schema:i,parentSchema:a,$data:o,it:u}=t;rm(u,e);let l=!o&&e.compile?e.compile.call(u.self,i,a,u):e.validate,f=yc(n,s,l),h=n.let("valid");t.block$data(h,_),t.ok((r=e.valid)!==null&&r!==void 0?r:h);function _(){if(e.errors===!1)v(),e.modifying&&mc(t),E(()=>t.error());else{let S=e.async?$():g();e.modifying&&mc(t),E(()=>tm(t,S))}}function $(){let S=n.let("ruleErrs",null);return n.try(()=>v((0,_e._)`await `),R=>n.assign(h,!1).if((0,_e._)`${R} instanceof ${u.ValidationError}`,()=>n.assign(S,(0,_e._)`${R}.errors`),()=>n.throw(R))),S}function g(){let S=(0,_e._)`${f}.errors`;return n.assign(S,null),v(_e.nil),S}function v(S=e.async?(0,_e._)`await `:_e.nil){let R=u.opts.passContext?Dt.default.this:Dt.default.self,W=!("compile"in e&&!o||e.schema===!1);n.assign(h,(0,_e._)`${S}${(0,Xh.callValidateCode)(t,f,R,W)}`,e.modifying)}function E(S){var R;n.if((0,_e.not)((R=e.valid)!==null&&R!==void 0?R:h),S)}}Xe.funcKeywordCode=em;function mc(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,_e._)`${n.parentData}[${n.parentDataProperty}]`))}function tm(t,e){let{gen:r}=t;r.if((0,_e._)`Array.isArray(${e})`,()=>{r.assign(Dt.default.vErrors,(0,_e._)`${Dt.default.vErrors} === null ? ${e} : ${Dt.default.vErrors}.concat(${e})`).assign(Dt.default.errors,(0,_e._)`${Dt.default.vErrors}.length`),(0,Qh.extendErrors)(t)},()=>t.error())}function rm({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function yc(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,_e.stringify)(r)})}function nm(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t=="undefined")}Xe.validSchemaType=nm;function sm({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let a=s.dependencies;if(a==null?void 0:a.some(o=>!Object.prototype.hasOwnProperty.call(t,o)))throw new Error(`parent schema must have dependencies of ${i}: ${a.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){let u=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(u);else throw new Error(u)}}Xe.validateKeywordUsage=sm});var vc=w(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.extendSubschemaMode=gt.extendSubschemaData=gt.getSubschema=void 0;var Qe=k(),gc=U();function im(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:a}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let o=t.schema[e];return r===void 0?{schema:o,schemaPath:(0,Qe._)`${t.schemaPath}${(0,Qe.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:o[r],schemaPath:(0,Qe._)`${t.schemaPath}${(0,Qe.getProperty)(e)}${(0,Qe.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,gc.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||a===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:a,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}gt.getSubschema=im;function am(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:a}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:o}=e;if(r!==void 0){let{errorPath:l,dataPathArr:f,opts:h}=e,_=o.let("data",(0,Qe._)`${e.data}${(0,Qe.getProperty)(r)}`,!0);u(_),t.errorPath=(0,Qe.str)`${l}${(0,gc.getErrorPath)(r,n,h.jsPropertySyntax)}`,t.parentDataProperty=(0,Qe._)`${r}`,t.dataPathArr=[...f,t.parentDataProperty]}if(s!==void 0){let l=s instanceof Qe.Name?s:o.let("data",s,!0);u(l),a!==void 0&&(t.propertyName=a)}i&&(t.dataTypes=i);function u(l){t.data=l,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,l]}}gt.extendSubschemaData=am;function om(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}gt.extendSubschemaMode=om});var $i=w((j0,wc)=>{"use strict";wc.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var a=i[s];if(!t(e[a],r[a]))return!1}return!0}return e!==e&&r!==r}});var Ec=w((M0,$c)=>{"use strict";var vt=$c.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};Qn(e,n,s,t,"",t)};vt.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};vt.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};vt.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};vt.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Qn(t,e,r,n,s,i,a,o,u,l){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,i,a,o,u,l);for(var f in n){var h=n[f];if(Array.isArray(h)){if(f in vt.arrayKeywords)for(var _=0;_<h.length;_++)Qn(t,e,r,h[_],s+"/"+f+"/"+_,i,s,f,n,_)}else if(f in vt.propsKeywords){if(h&&typeof h=="object")for(var $ in h)Qn(t,e,r,h[$],s+"/"+f+"/"+um($),i,s,f,n,$)}else(f in vt.keywords||t.allKeys&&!(f in vt.skipKeywords))&&Qn(t,e,r,h,s+"/"+f,i,s,f,n)}r(n,s,i,a,o,u,l)}}function um(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var Ei=w((Zn,Sc)=>{(function(t,e){typeof Zn=="object"&&typeof Sc!="undefined"?e(Zn):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(Zn,function(t){"use strict";function e(){for(var d=arguments.length,c=Array(d),p=0;p<d;p++)c[p]=arguments[p];if(c.length>1){c[0]=c[0].slice(0,-1);for(var m=c.length-1,y=1;y<m;++y)c[y]=c[y].slice(1,-1);return c[m]=c[m].slice(1),c.join("")}else return c[0]}function r(d){return"(?:"+d+")"}function n(d){return d===void 0?"undefined":d===null?"null":Object.prototype.toString.call(d).split(" ").pop().split("]").shift().toLowerCase()}function s(d){return d.toUpperCase()}function i(d){return d!=null?d instanceof Array?d:typeof d.length!="number"||d.split||d.setInterval||d.call?[d]:Array.prototype.slice.call(d):[]}function a(d,c){var p=d;if(c)for(var m in c)p[m]=c[m];return p}function o(d){var c="[A-Za-z]",p="[\\x0D]",m="[0-9]",y="[\\x22]",T=e(m,"[A-Fa-f]"),C="[\\x0A]",M="[\\x20]",F=r(r("%[EFef]"+T+"%"+T+T+"%"+T+T)+"|"+r("%[89A-Fa-f]"+T+"%"+T+T)+"|"+r("%"+T+T)),re="[\\:\\/\\?\\#\\[\\]\\@]",q="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",X=e(re,q),ne=d?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Y=d?"[\\uE000-\\uF8FF]":"[]",x=e(c,m,"[\\-\\.\\_\\~]",ne),Q=r(c+e(c,m,"[\\+\\-\\.]")+"*"),J=r(r(F+"|"+e(x,q,"[\\:]"))+"*"),Et=r(r("25[0-5]")+"|"+r("2[0-4]"+m)+"|"+r("1"+m+m)+"|"+r("[1-9]"+m)+"|"+m),Ee=r(r("25[0-5]")+"|"+r("2[0-4]"+m)+"|"+r("1"+m+m)+"|"+r("0?[1-9]"+m)+"|0?0?"+m),Pe=r(Ee+"\\."+Ee+"\\."+Ee+"\\."+Ee),G=r(T+"{1,4}"),Se=r(r(G+"\\:"+G)+"|"+Pe),Oe=r(r(G+"\\:")+"{6}"+Se),Le=r("\\:\\:"+r(G+"\\:")+"{5}"+Se),St=r(r(G)+"?\\:\\:"+r(G+"\\:")+"{4}"+Se),nt=r(r(r(G+"\\:")+"{0,1}"+G)+"?\\:\\:"+r(G+"\\:")+"{3}"+Se),gr=r(r(r(G+"\\:")+"{0,2}"+G)+"?\\:\\:"+r(G+"\\:")+"{2}"+Se),rn=r(r(r(G+"\\:")+"{0,3}"+G)+"?\\:\\:"+G+"\\:"+Se),nn=r(r(r(G+"\\:")+"{0,4}"+G)+"?\\:\\:"+Se),Bt=r(r(r(G+"\\:")+"{0,5}"+G)+"?\\:\\:"+G),Kt=r(r(r(G+"\\:")+"{0,6}"+G)+"?\\:\\:"),st=r([Oe,Le,St,nt,gr,rn,nn,Bt,Kt].join("|")),Gt=r(r(x+"|"+F)+"+"),Ss=r(st+"\\%25"+Gt),Tt=r(st+r("\\%25|\\%(?!"+T+"{2})")+Gt),Id=r("[vV]"+T+"+\\."+e(x,q,"[\\:]")+"+"),Ad=r("\\["+r(Tt+"|"+st+"|"+Id)+"\\]"),Ha=r(r(F+"|"+e(x,q))+"*"),vr=r(Ad+"|"+Pe+"(?!"+Ha+")|"+Ha),wr=r(m+"*"),za=r(r(J+"@")+"?"+vr+r("\\:"+wr)+"?"),$r=r(F+"|"+e(x,q,"[\\:\\@]")),kd=r($r+"*"),Wa=r($r+"+"),Dd=r(r(F+"|"+e(x,q,"[\\@]"))+"+"),it=r(r("\\/"+kd)+"*"),Ht=r("\\/"+r(Wa+it)+"?"),Ts=r(Dd+it),sn=r(Wa+it),zt="(?!"+$r+")",Kg=r(it+"|"+Ht+"|"+Ts+"|"+sn+"|"+zt),Wt=r(r($r+"|"+e("[\\/\\?]",Y))+"*"),Er=r(r($r+"|[\\/\\?]")+"*"),Ya=r(r("\\/\\/"+za+it)+"|"+Ht+"|"+sn+"|"+zt),qd=r(Q+"\\:"+Ya+r("\\?"+Wt)+"?"+r("\\#"+Er)+"?"),jd=r(r("\\/\\/"+za+it)+"|"+Ht+"|"+Ts+"|"+zt),Md=r(jd+r("\\?"+Wt)+"?"+r("\\#"+Er)+"?"),Gg=r(qd+"|"+Md),Hg=r(Q+"\\:"+Ya+r("\\?"+Wt)+"?"),zg="^("+Q+")\\:"+r(r("\\/\\/("+r("("+J+")@")+"?("+vr+")"+r("\\:("+wr+")")+"?)")+"?("+it+"|"+Ht+"|"+sn+"|"+zt+")")+r("\\?("+Wt+")")+"?"+r("\\#("+Er+")")+"?$",Wg="^(){0}"+r(r("\\/\\/("+r("("+J+")@")+"?("+vr+")"+r("\\:("+wr+")")+"?)")+"?("+it+"|"+Ht+"|"+Ts+"|"+zt+")")+r("\\?("+Wt+")")+"?"+r("\\#("+Er+")")+"?$",Yg="^("+Q+")\\:"+r(r("\\/\\/("+r("("+J+")@")+"?("+vr+")"+r("\\:("+wr+")")+"?)")+"?("+it+"|"+Ht+"|"+sn+"|"+zt+")")+r("\\?("+Wt+")")+"?$",Xg="^"+r("\\#("+Er+")")+"?$",Qg="^"+r("("+J+")@")+"?("+vr+")"+r("\\:("+wr+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",c,m,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",x,q),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",x,q),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",x,q),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",x,q),"g"),NOT_QUERY:new RegExp(e("[^\\%]",x,q,"[\\:\\@\\/\\?]",Y),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",x,q,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",x,q),"g"),UNRESERVED:new RegExp(x,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",x,X),"g"),PCT_ENCODED:new RegExp(F,"g"),IPV4ADDRESS:new RegExp("^("+Pe+")$"),IPV6ADDRESS:new RegExp("^\\[?("+st+")"+r(r("\\%25|\\%(?!"+T+"{2})")+"("+Gt+")")+"?\\]?$")}}var u=o(!1),l=o(!0),f=function(){function d(c,p){var m=[],y=!0,T=!1,C=void 0;try{for(var M=c[Symbol.iterator](),F;!(y=(F=M.next()).done)&&(m.push(F.value),!(p&&m.length===p));y=!0);}catch(re){T=!0,C=re}finally{try{!y&&M.return&&M.return()}finally{if(T)throw C}}return m}return function(c,p){if(Array.isArray(c))return c;if(Symbol.iterator in Object(c))return d(c,p);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(d){if(Array.isArray(d)){for(var c=0,p=Array(d.length);c<d.length;c++)p[c]=d[c];return p}else return Array.from(d)},_=2147483647,$=36,g=1,v=26,E=38,S=700,R=72,W=128,B="-",K=/^xn--/,be=/[^\0-\x7E]/,lt=/[\x2E\u3002\uFF0E\uFF61]/g,mr={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},et=$-g,ge=Math.floor,Ut=String.fromCharCode;function Ue(d){throw new RangeError(mr[d])}function ad(d,c){for(var p=[],m=d.length;m--;)p[m]=c(d[m]);return p}function Oa(d,c){var p=d.split("@"),m="";p.length>1&&(m=p[0]+"@",d=p[1]),d=d.replace(lt,".");var y=d.split("."),T=ad(y,c).join(".");return m+T}function Ca(d){for(var c=[],p=0,m=d.length;p<m;){var y=d.charCodeAt(p++);if(y>=55296&&y<=56319&&p<m){var T=d.charCodeAt(p++);(T&64512)==56320?c.push(((y&1023)<<10)+(T&1023)+65536):(c.push(y),p--)}else c.push(y)}return c}var od=function(c){return String.fromCodePoint.apply(String,h(c))},ud=function(c){return c-48<10?c-22:c-65<26?c-65:c-97<26?c-97:$},Na=function(c,p){return c+22+75*(c<26)-((p!=0)<<5)},Ia=function(c,p,m){var y=0;for(c=m?ge(c/S):c>>1,c+=ge(c/p);c>et*v>>1;y+=$)c=ge(c/et);return ge(y+(et+1)*c/(c+E))},Aa=function(c){var p=[],m=c.length,y=0,T=W,C=R,M=c.lastIndexOf(B);M<0&&(M=0);for(var F=0;F<M;++F)c.charCodeAt(F)>=128&&Ue("not-basic"),p.push(c.charCodeAt(F));for(var re=M>0?M+1:0;re<m;){for(var q=y,X=1,ne=$;;ne+=$){re>=m&&Ue("invalid-input");var Y=ud(c.charCodeAt(re++));(Y>=$||Y>ge((_-y)/X))&&Ue("overflow"),y+=Y*X;var x=ne<=C?g:ne>=C+v?v:ne-C;if(Y<x)break;var Q=$-x;X>ge(_/Q)&&Ue("overflow"),X*=Q}var J=p.length+1;C=Ia(y-q,J,q==0),ge(y/J)>_-T&&Ue("overflow"),T+=ge(y/J),y%=J,p.splice(y++,0,T)}return String.fromCodePoint.apply(String,p)},ka=function(c){var p=[];c=Ca(c);var m=c.length,y=W,T=0,C=R,M=!0,F=!1,re=void 0;try{for(var q=c[Symbol.iterator](),X;!(M=(X=q.next()).done);M=!0){var ne=X.value;ne<128&&p.push(Ut(ne))}}catch(Tt){F=!0,re=Tt}finally{try{!M&&q.return&&q.return()}finally{if(F)throw re}}var Y=p.length,x=Y;for(Y&&p.push(B);x<m;){var Q=_,J=!0,Et=!1,Ee=void 0;try{for(var Pe=c[Symbol.iterator](),G;!(J=(G=Pe.next()).done);J=!0){var Se=G.value;Se>=y&&Se<Q&&(Q=Se)}}catch(Tt){Et=!0,Ee=Tt}finally{try{!J&&Pe.return&&Pe.return()}finally{if(Et)throw Ee}}var Oe=x+1;Q-y>ge((_-T)/Oe)&&Ue("overflow"),T+=(Q-y)*Oe,y=Q;var Le=!0,St=!1,nt=void 0;try{for(var gr=c[Symbol.iterator](),rn;!(Le=(rn=gr.next()).done);Le=!0){var nn=rn.value;if(nn<y&&++T>_&&Ue("overflow"),nn==y){for(var Bt=T,Kt=$;;Kt+=$){var st=Kt<=C?g:Kt>=C+v?v:Kt-C;if(Bt<st)break;var Gt=Bt-st,Ss=$-st;p.push(Ut(Na(st+Gt%Ss,0))),Bt=ge(Gt/Ss)}p.push(Ut(Na(Bt,0))),C=Ia(T,Oe,x==Y),T=0,++x}}}catch(Tt){St=!0,nt=Tt}finally{try{!Le&&gr.return&&gr.return()}finally{if(St)throw nt}}++T,++y}return p.join("")},cd=function(c){return Oa(c,function(p){return K.test(p)?Aa(p.slice(4).toLowerCase()):p})},ld=function(c){return Oa(c,function(p){return be.test(p)?"xn--"+ka(p):p})},Ft={version:"2.1.0",ucs2:{decode:Ca,encode:od},decode:Aa,encode:ka,toASCII:ld,toUnicode:cd},Re={};function Fe(d){var c=d.charCodeAt(0),p=void 0;return c<16?p="%0"+c.toString(16).toUpperCase():c<128?p="%"+c.toString(16).toUpperCase():c<2048?p="%"+(c>>6|192).toString(16).toUpperCase()+"%"+(c&63|128).toString(16).toUpperCase():p="%"+(c>>12|224).toString(16).toUpperCase()+"%"+(c>>6&63|128).toString(16).toUpperCase()+"%"+(c&63|128).toString(16).toUpperCase(),p}function Vt(d){for(var c="",p=0,m=d.length;p<m;){var y=parseInt(d.substr(p+1,2),16);if(y<128)c+=String.fromCharCode(y),p+=3;else if(y>=194&&y<224){if(m-p>=6){var T=parseInt(d.substr(p+4,2),16);c+=String.fromCharCode((y&31)<<6|T&63)}else c+=d.substr(p,6);p+=6}else if(y>=224){if(m-p>=9){var C=parseInt(d.substr(p+4,2),16),M=parseInt(d.substr(p+7,2),16);c+=String.fromCharCode((y&15)<<12|(C&63)<<6|M&63)}else c+=d.substr(p,9);p+=9}else c+=d.substr(p,3),p+=3}return c}function vs(d,c){function p(m){var y=Vt(m);return y.match(c.UNRESERVED)?y:m}return d.scheme&&(d.scheme=String(d.scheme).replace(c.PCT_ENCODED,p).toLowerCase().replace(c.NOT_SCHEME,"")),d.userinfo!==void 0&&(d.userinfo=String(d.userinfo).replace(c.PCT_ENCODED,p).replace(c.NOT_USERINFO,Fe).replace(c.PCT_ENCODED,s)),d.host!==void 0&&(d.host=String(d.host).replace(c.PCT_ENCODED,p).toLowerCase().replace(c.NOT_HOST,Fe).replace(c.PCT_ENCODED,s)),d.path!==void 0&&(d.path=String(d.path).replace(c.PCT_ENCODED,p).replace(d.scheme?c.NOT_PATH:c.NOT_PATH_NOSCHEME,Fe).replace(c.PCT_ENCODED,s)),d.query!==void 0&&(d.query=String(d.query).replace(c.PCT_ENCODED,p).replace(c.NOT_QUERY,Fe).replace(c.PCT_ENCODED,s)),d.fragment!==void 0&&(d.fragment=String(d.fragment).replace(c.PCT_ENCODED,p).replace(c.NOT_FRAGMENT,Fe).replace(c.PCT_ENCODED,s)),d}function ws(d){return d.replace(/^0*(.*)/,"$1")||"0"}function $s(d,c){var p=d.match(c.IPV4ADDRESS)||[],m=f(p,2),y=m[1];return y?y.split(".").map(ws).join("."):d}function Da(d,c){var p=d.match(c.IPV6ADDRESS)||[],m=f(p,3),y=m[1],T=m[2];if(y){for(var C=y.toLowerCase().split("::").reverse(),M=f(C,2),F=M[0],re=M[1],q=re?re.split(":").map(ws):[],X=F.split(":").map(ws),ne=c.IPV4ADDRESS.test(X[X.length-1]),Y=ne?7:8,x=X.length-Y,Q=Array(Y),J=0;J<Y;++J)Q[J]=q[J]||X[x+J]||"";ne&&(Q[Y-1]=$s(Q[Y-1],c));var Et=Q.reduce(function(Oe,Le,St){if(!Le||Le==="0"){var nt=Oe[Oe.length-1];nt&&nt.index+nt.length===St?nt.length++:Oe.push({index:St,length:1})}return Oe},[]),Ee=Et.sort(function(Oe,Le){return Le.length-Oe.length})[0],Pe=void 0;if(Ee&&Ee.length>1){var G=Q.slice(0,Ee.index),Se=Q.slice(Ee.index+Ee.length);Pe=G.join(":")+"::"+Se.join(":")}else Pe=Q.join(":");return T&&(Pe+="%"+T),Pe}else return d}var dd=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,fd="".match(/(){0}/)[1]===void 0;function tt(d){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p={},m=c.iri!==!1?l:u;c.reference==="suffix"&&(d=(c.scheme?c.scheme+":":"")+"//"+d);var y=d.match(dd);if(y){fd?(p.scheme=y[1],p.userinfo=y[3],p.host=y[4],p.port=parseInt(y[5],10),p.path=y[6]||"",p.query=y[7],p.fragment=y[8],isNaN(p.port)&&(p.port=y[5])):(p.scheme=y[1]||void 0,p.userinfo=d.indexOf("@")!==-1?y[3]:void 0,p.host=d.indexOf("//")!==-1?y[4]:void 0,p.port=parseInt(y[5],10),p.path=y[6]||"",p.query=d.indexOf("?")!==-1?y[7]:void 0,p.fragment=d.indexOf("#")!==-1?y[8]:void 0,isNaN(p.port)&&(p.port=d.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?y[4]:void 0)),p.host&&(p.host=Da($s(p.host,m),m)),p.scheme===void 0&&p.userinfo===void 0&&p.host===void 0&&p.port===void 0&&!p.path&&p.query===void 0?p.reference="same-document":p.scheme===void 0?p.reference="relative":p.fragment===void 0?p.reference="absolute":p.reference="uri",c.reference&&c.reference!=="suffix"&&c.reference!==p.reference&&(p.error=p.error||"URI is not a "+c.reference+" reference.");var T=Re[(c.scheme||p.scheme||"").toLowerCase()];if(!c.unicodeSupport&&(!T||!T.unicodeSupport)){if(p.host&&(c.domainHost||T&&T.domainHost))try{p.host=Ft.toASCII(p.host.replace(m.PCT_ENCODED,Vt).toLowerCase())}catch(C){p.error=p.error||"Host's domain name can not be converted to ASCII via punycode: "+C}vs(p,u)}else vs(p,m);T&&T.parse&&T.parse(p,c)}else p.error=p.error||"URI can not be parsed.";return p}function pd(d,c){var p=c.iri!==!1?l:u,m=[];return d.userinfo!==void 0&&(m.push(d.userinfo),m.push("@")),d.host!==void 0&&m.push(Da($s(String(d.host),p),p).replace(p.IPV6ADDRESS,function(y,T,C){return"["+T+(C?"%25"+C:"")+"]"})),(typeof d.port=="number"||typeof d.port=="string")&&(m.push(":"),m.push(String(d.port))),m.length?m.join(""):void 0}var qa=/^\.\.?\//,ja=/^\/\.(\/|$)/,Ma=/^\/\.\.(\/|$)/,hd=/^\/?(?:.|\n)*?(?=\/|$)/;function Jt(d){for(var c=[];d.length;)if(d.match(qa))d=d.replace(qa,"");else if(d.match(ja))d=d.replace(ja,"/");else if(d.match(Ma))d=d.replace(Ma,"/"),c.pop();else if(d==="."||d==="..")d="";else{var p=d.match(hd);if(p){var m=p[0];d=d.slice(m.length),c.push(m)}else throw new Error("Unexpected dot segment condition")}return c.join("")}function Ve(d){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=c.iri?l:u,m=[],y=Re[(c.scheme||d.scheme||"").toLowerCase()];if(y&&y.serialize&&y.serialize(d,c),d.host&&!p.IPV6ADDRESS.test(d.host)){if(c.domainHost||y&&y.domainHost)try{d.host=c.iri?Ft.toUnicode(d.host):Ft.toASCII(d.host.replace(p.PCT_ENCODED,Vt).toLowerCase())}catch(M){d.error=d.error||"Host's domain name can not be converted to "+(c.iri?"Unicode":"ASCII")+" via punycode: "+M}}vs(d,p),c.reference!=="suffix"&&d.scheme&&(m.push(d.scheme),m.push(":"));var T=pd(d,c);if(T!==void 0&&(c.reference!=="suffix"&&m.push("//"),m.push(T),d.path&&d.path.charAt(0)!=="/"&&m.push("/")),d.path!==void 0){var C=d.path;!c.absolutePath&&(!y||!y.absolutePath)&&(C=Jt(C)),T===void 0&&(C=C.replace(/^\/\//,"/%2F")),m.push(C)}return d.query!==void 0&&(m.push("?"),m.push(d.query)),d.fragment!==void 0&&(m.push("#"),m.push(d.fragment)),m.join("")}function xa(d,c){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},m=arguments[3],y={};return m||(d=tt(Ve(d,p),p),c=tt(Ve(c,p),p)),p=p||{},!p.tolerant&&c.scheme?(y.scheme=c.scheme,y.userinfo=c.userinfo,y.host=c.host,y.port=c.port,y.path=Jt(c.path||""),y.query=c.query):(c.userinfo!==void 0||c.host!==void 0||c.port!==void 0?(y.userinfo=c.userinfo,y.host=c.host,y.port=c.port,y.path=Jt(c.path||""),y.query=c.query):(c.path?(c.path.charAt(0)==="/"?y.path=Jt(c.path):((d.userinfo!==void 0||d.host!==void 0||d.port!==void 0)&&!d.path?y.path="/"+c.path:d.path?y.path=d.path.slice(0,d.path.lastIndexOf("/")+1)+c.path:y.path=c.path,y.path=Jt(y.path)),y.query=c.query):(y.path=d.path,c.query!==void 0?y.query=c.query:y.query=d.query),y.userinfo=d.userinfo,y.host=d.host,y.port=d.port),y.scheme=d.scheme),y.fragment=c.fragment,y}function md(d,c,p){var m=a({scheme:"null"},p);return Ve(xa(tt(d,m),tt(c,m),m,!0),m)}function yd(d,c){return typeof d=="string"?d=Ve(tt(d,c),c):n(d)==="object"&&(d=tt(Ve(d,c),c)),d}function _d(d,c,p){return typeof d=="string"?d=Ve(tt(d,p),p):n(d)==="object"&&(d=Ve(d,p)),typeof c=="string"?c=Ve(tt(c,p),p):n(c)==="object"&&(c=Ve(c,p)),d===c}function gd(d,c){return d&&d.toString().replace(!c||!c.iri?u.ESCAPE:l.ESCAPE,Fe)}function rt(d,c){return d&&d.toString().replace(!c||!c.iri?u.PCT_ENCODED:l.PCT_ENCODED,Vt)}var yr={scheme:"http",domainHost:!0,parse:function(c,p){return c.host||(c.error=c.error||"HTTP URIs must have a host."),c},serialize:function(c,p){var m=String(c.scheme).toLowerCase()==="https";return(c.port===(m?443:80)||c.port==="")&&(c.port=void 0),c.path||(c.path="/"),c}},Ua={scheme:"https",domainHost:yr.domainHost,parse:yr.parse,serialize:yr.serialize};function Fa(d){return typeof d.secure=="boolean"?d.secure:String(d.scheme).toLowerCase()==="wss"}var _r={scheme:"ws",domainHost:!0,parse:function(c,p){var m=c;return m.secure=Fa(m),m.resourceName=(m.path||"/")+(m.query?"?"+m.query:""),m.path=void 0,m.query=void 0,m},serialize:function(c,p){if((c.port===(Fa(c)?443:80)||c.port==="")&&(c.port=void 0),typeof c.secure=="boolean"&&(c.scheme=c.secure?"wss":"ws",c.secure=void 0),c.resourceName){var m=c.resourceName.split("?"),y=f(m,2),T=y[0],C=y[1];c.path=T&&T!=="/"?T:void 0,c.query=C,c.resourceName=void 0}return c.fragment=void 0,c}},Va={scheme:"wss",domainHost:_r.domainHost,parse:_r.parse,serialize:_r.serialize},vd={},wd=!0,Ja="[A-Za-z0-9\\-\\.\\_\\~"+(wd?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",Je="[0-9A-Fa-f]",$d=r(r("%[EFef]"+Je+"%"+Je+Je+"%"+Je+Je)+"|"+r("%[89A-Fa-f]"+Je+"%"+Je+Je)+"|"+r("%"+Je+Je)),Ed="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Sd="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Td=e(Sd,'[\\"\\\\]'),bd="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Rd=new RegExp(Ja,"g"),Lt=new RegExp($d,"g"),Pd=new RegExp(e("[^]",Ed,"[\\.]",'[\\"]',Td),"g"),La=new RegExp(e("[^]",Ja,bd),"g"),Od=La;function Es(d){var c=Vt(d);return c.match(Rd)?c:d}var Ba={scheme:"mailto",parse:function(c,p){var m=c,y=m.to=m.path?m.path.split(","):[];if(m.path=void 0,m.query){for(var T=!1,C={},M=m.query.split("&"),F=0,re=M.length;F<re;++F){var q=M[F].split("=");switch(q[0]){case"to":for(var X=q[1].split(","),ne=0,Y=X.length;ne<Y;++ne)y.push(X[ne]);break;case"subject":m.subject=rt(q[1],p);break;case"body":m.body=rt(q[1],p);break;default:T=!0,C[rt(q[0],p)]=rt(q[1],p);break}}T&&(m.headers=C)}m.query=void 0;for(var x=0,Q=y.length;x<Q;++x){var J=y[x].split("@");if(J[0]=rt(J[0]),p.unicodeSupport)J[1]=rt(J[1],p).toLowerCase();else try{J[1]=Ft.toASCII(rt(J[1],p).toLowerCase())}catch(Et){m.error=m.error||"Email address's domain name can not be converted to ASCII via punycode: "+Et}y[x]=J.join("@")}return m},serialize:function(c,p){var m=c,y=i(c.to);if(y){for(var T=0,C=y.length;T<C;++T){var M=String(y[T]),F=M.lastIndexOf("@"),re=M.slice(0,F).replace(Lt,Es).replace(Lt,s).replace(Pd,Fe),q=M.slice(F+1);try{q=p.iri?Ft.toUnicode(q):Ft.toASCII(rt(q,p).toLowerCase())}catch(x){m.error=m.error||"Email address's domain name can not be converted to "+(p.iri?"Unicode":"ASCII")+" via punycode: "+x}y[T]=re+"@"+q}m.path=y.join(",")}var X=c.headers=c.headers||{};c.subject&&(X.subject=c.subject),c.body&&(X.body=c.body);var ne=[];for(var Y in X)X[Y]!==vd[Y]&&ne.push(Y.replace(Lt,Es).replace(Lt,s).replace(La,Fe)+"="+X[Y].replace(Lt,Es).replace(Lt,s).replace(Od,Fe));return ne.length&&(m.query=ne.join("&")),m}},Cd=/^([^\:]+)\:(.*)/,Ka={scheme:"urn",parse:function(c,p){var m=c.path&&c.path.match(Cd),y=c;if(m){var T=p.scheme||y.scheme||"urn",C=m[1].toLowerCase(),M=m[2],F=T+":"+(p.nid||C),re=Re[F];y.nid=C,y.nss=M,y.path=void 0,re&&(y=re.parse(y,p))}else y.error=y.error||"URN can not be parsed.";return y},serialize:function(c,p){var m=p.scheme||c.scheme||"urn",y=c.nid,T=m+":"+(p.nid||y),C=Re[T];C&&(c=C.serialize(c,p));var M=c,F=c.nss;return M.path=(y||p.nid)+":"+F,M}},Nd=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ga={scheme:"urn:uuid",parse:function(c,p){var m=c;return m.uuid=m.nss,m.nss=void 0,!p.tolerant&&(!m.uuid||!m.uuid.match(Nd))&&(m.error=m.error||"UUID is not valid."),m},serialize:function(c,p){var m=c;return m.nss=(c.uuid||"").toLowerCase(),m}};Re[yr.scheme]=yr,Re[Ua.scheme]=Ua,Re[_r.scheme]=_r,Re[Va.scheme]=Va,Re[Ba.scheme]=Ba,Re[Ka.scheme]=Ka,Re[Ga.scheme]=Ga,t.SCHEMES=Re,t.pctEncChar=Fe,t.pctDecChars=Vt,t.parse=tt,t.removeDotSegments=Jt,t.serialize=Ve,t.resolveComponents=xa,t.resolve=md,t.normalize=yd,t.equal=_d,t.escapeComponent=gd,t.unescapeComponent=rt,Object.defineProperty(t,"__esModule",{value:!0})})});var Ur=w(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.getSchemaRefs=we.resolveUrl=we.normalizeId=we._getFullPath=we.getFullPath=we.inlineRef=void 0;var cm=U(),lm=$i(),dm=Ec(),es=Ei(),fm=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function pm(t,e=!0){return typeof t=="boolean"?!0:e===!0?!Si(t):e?Tc(t)<=e:!1}we.inlineRef=pm;var hm=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Si(t){for(let e in t){if(hm.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(Si)||typeof r=="object"&&Si(r))return!0}return!1}function Tc(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!fm.has(r)&&(typeof t[r]=="object"&&(0,cm.eachItem)(t[r],n=>e+=Tc(n)),e===1/0))return 1/0}return e}function bc(t="",e){e!==!1&&(t=cr(t));let r=es.parse(t);return Rc(r)}we.getFullPath=bc;function Rc(t){return es.serialize(t).split("#")[0]+"#"}we._getFullPath=Rc;var mm=/#\/?$/;function cr(t){return t?t.replace(mm,""):""}we.normalizeId=cr;function ym(t,e){return e=cr(e),es.resolve(t,e)}we.resolveUrl=ym;var _m=/^[a-z_][-a-z0-9._]*$/i;function gm(t,e){if(typeof t=="boolean")return{};let{schemaId:r}=this.opts,n=cr(t[r]||e),s={"":n},i=bc(n,!1),a={},o=new Set;return dm(t,{allKeys:!0},(f,h,_,$)=>{if($===void 0)return;let g=i+h,v=s[$];typeof f[r]=="string"&&(v=E.call(this,f[r])),S.call(this,f.$anchor),S.call(this,f.$dynamicAnchor),s[h]=v;function E(R){if(R=cr(v?es.resolve(v,R):R),o.has(R))throw l(R);o.add(R);let W=this.refs[R];return typeof W=="string"&&(W=this.refs[W]),typeof W=="object"?u(f,W.schema,R):R!==cr(g)&&(R[0]==="#"?(u(f,a[R],R),a[R]=f):this.refs[R]=g),R}function S(R){if(typeof R=="string"){if(!_m.test(R))throw new Error(`invalid anchor "${R}"`);E.call(this,`#${R}`)}}}),a;function u(f,h,_){if(h!==void 0&&!lm(f,h))throw l(_)}function l(f){return new Error(`reference "${f}" resolves to more than one schema`)}}we.getSchemaRefs=gm});var Jr=w(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.getData=wt.KeywordCxt=wt.validateFunctionCode=void 0;var Pc=ic(),Oc=xr(),Ti=hi(),ts=xr(),vm=fc(),Fr=_c(),bi=vc(),b=k(),O=ut(),wm=Ur(),ct=U(),Vr=jr();function $m(t){if(Ac(t)&&(kc(t),Ic(t))){Tm(t);return}Cc(t,()=>(0,Pc.topBoolOrEmptySchema)(t))}wt.validateFunctionCode=$m;function Cc({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,b._)`${O.default.data}, ${O.default.valCxt}`,n.$async,()=>{t.code((0,b._)`"use strict"; ${Nc(r,s)}`),Sm(t,s),t.code(i)}):t.func(e,(0,b._)`${O.default.data}, ${Em(s)}`,n.$async,()=>t.code(Nc(r,s)).code(i))}function Em(t){return(0,b._)`{${O.default.instancePath}="", ${O.default.parentData}, ${O.default.parentDataProperty}, ${O.default.rootData}=${O.default.data}${t.dynamicRef?(0,b._)`, ${O.default.dynamicAnchors}={}`:b.nil}}={}`}function Sm(t,e){t.if(O.default.valCxt,()=>{t.var(O.default.instancePath,(0,b._)`${O.default.valCxt}.${O.default.instancePath}`),t.var(O.default.parentData,(0,b._)`${O.default.valCxt}.${O.default.parentData}`),t.var(O.default.parentDataProperty,(0,b._)`${O.default.valCxt}.${O.default.parentDataProperty}`),t.var(O.default.rootData,(0,b._)`${O.default.valCxt}.${O.default.rootData}`),e.dynamicRef&&t.var(O.default.dynamicAnchors,(0,b._)`${O.default.valCxt}.${O.default.dynamicAnchors}`)},()=>{t.var(O.default.instancePath,(0,b._)`""`),t.var(O.default.parentData,(0,b._)`undefined`),t.var(O.default.parentDataProperty,(0,b._)`undefined`),t.var(O.default.rootData,O.default.data),e.dynamicRef&&t.var(O.default.dynamicAnchors,(0,b._)`{}`)})}function Tm(t){let{schema:e,opts:r,gen:n}=t;Cc(t,()=>{r.$comment&&e.$comment&&qc(t),Cm(t),n.let(O.default.vErrors,null),n.let(O.default.errors,0),r.unevaluated&&bm(t),Dc(t),Am(t)})}function bm(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,b._)`${r}.evaluated`),e.if((0,b._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,b._)`${t.evaluated}.props`,(0,b._)`undefined`)),e.if((0,b._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,b._)`${t.evaluated}.items`,(0,b._)`undefined`))}function Nc(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,b._)`/*# sourceURL=${r} */`:b.nil}function Rm(t,e){if(Ac(t)&&(kc(t),Ic(t))){Pm(t,e);return}(0,Pc.boolOrEmptySchema)(t,e)}function Ic({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function Ac(t){return typeof t.schema!="boolean"}function Pm(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&qc(t),Nm(t),Im(t);let i=n.const("_errs",O.default.errors);Dc(t,i),n.var(e,(0,b._)`${i} === ${O.default.errors}`)}function kc(t){(0,ct.checkUnknownRules)(t),Om(t)}function Dc(t,e){if(t.opts.jtd)return jc(t,[],!1,e);let r=(0,Oc.getSchemaTypes)(t.schema),n=(0,Oc.coerceAndCheckDataType)(t,r);jc(t,r,!n,e)}function Om(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,ct.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Cm(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,ct.checkStrictMode)(t,"default is ignored in the schema root")}function Nm(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,wm.resolveUrl)(t.baseId,e))}function Im(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function qc({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)t.code((0,b._)`${O.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let a=(0,b.str)`${n}/$comment`,o=t.scopeValue("root",{ref:e.root});t.code((0,b._)`${O.default.self}.opts.$comment(${i}, ${a}, ${o}.schema)`)}}function Am(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,b._)`${O.default.errors} === 0`,()=>e.return(O.default.data),()=>e.throw((0,b._)`new ${s}(${O.default.vErrors})`)):(e.assign((0,b._)`${n}.errors`,O.default.vErrors),i.unevaluated&&km(t),e.return((0,b._)`${O.default.errors} === 0`))}function km({gen:t,evaluated:e,props:r,items:n}){r instanceof b.Name&&t.assign((0,b._)`${e}.props`,r),n instanceof b.Name&&t.assign((0,b._)`${e}.items`,n)}function jc(t,e,r,n){let{gen:s,schema:i,data:a,allErrors:o,opts:u,self:l}=t,{RULES:f}=l;if(i.$ref&&(u.ignoreKeywordsWithRef||!(0,ct.schemaHasRulesButRef)(i,f))){s.block(()=>Uc(t,"$ref",f.all.$ref.definition));return}u.jtd||Dm(t,e),s.block(()=>{for(let _ of f.rules)h(_);h(f.post)});function h(_){!(0,Ti.shouldUseGroup)(i,_)||(_.type?(s.if((0,ts.checkDataType)(_.type,a,u.strictNumbers)),Mc(t,_),e.length===1&&e[0]===_.type&&r&&(s.else(),(0,ts.reportTypeError)(t)),s.endIf()):Mc(t,_),o||s.if((0,b._)`${O.default.errors} === ${n||0}`))}}function Mc(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,vm.assignDefaults)(t,e.type),r.block(()=>{for(let i of e.rules)(0,Ti.shouldUseRule)(n,i)&&Uc(t,i.keyword,i.definition,e.type)})}function Dm(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(qm(t,e),t.opts.allowUnionTypes||jm(t,e),Mm(t,t.dataTypes))}function qm(t,e){if(!!e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{xc(t.dataTypes,r)||Ri(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),t.dataTypes=t.dataTypes.filter(r=>xc(e,r))}}function jm(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&Ri(t,"use allowUnionTypes to allow union type keyword")}function Mm(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,Ti.shouldUseRule)(t.schema,s)){let{type:i}=s.definition;i.length&&!i.some(a=>xm(e,a))&&Ri(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function xm(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function xc(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function Ri(t,e){e+=` at "${t.schemaEnv.baseId+t.errSchemaPath}" (strictTypes)`,(0,ct.checkStrictMode)(t,e,t.opts.strictTypes)}var Pi=class{constructor(e,r,n){if((0,Fr.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,ct.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",Fc(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Fr.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",O.default.errors))}result(e,r,n){this.failResult((0,b.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,b.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,b._)`${r} !== undefined && (${(0,b.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?Vr.reportExtraError:Vr.reportError)(this,this.def.error,r)}$dataError(){(0,Vr.reportError)(this,this.def.$dataError||Vr.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Vr.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=b.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=b.nil,r=b.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:a}=this;n.if((0,b.or)((0,b._)`${s} === undefined`,r)),e!==b.nil&&n.assign(e,!0),(i.length||a.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==b.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,b.or)(a(),o());function a(){if(n.length){if(!(r instanceof b.Name))throw new Error("ajv implementation error");let u=Array.isArray(n)?n:[n];return(0,b._)`${(0,ts.checkDataTypes)(u,r,i.opts.strictNumbers,ts.DataType.Wrong)}`}return b.nil}function o(){if(s.validateSchema){let u=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,b._)`!${u}(${r})`}return b.nil}}subschema(e,r){let n=(0,bi.getSubschema)(this.it,e);(0,bi.extendSubschemaData)(n,this.it,e),(0,bi.extendSubschemaMode)(n,e);let s=ee(P(P({},this.it),n),{items:void 0,props:void 0});return Rm(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;!n.opts.unevaluated||(n.props!==!0&&e.props!==void 0&&(n.props=ct.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=ct.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,b.Name)),!0}};wt.KeywordCxt=Pi;function Uc(t,e,r,n){let s=new Pi(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,Fr.funcKeywordCode)(s,r):"macro"in r?(0,Fr.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,Fr.funcKeywordCode)(s,r)}var Um=/^\/(?:[^~]|~0|~1)*$/,Fm=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Fc(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return O.default.rootData;if(t[0]==="/"){if(!Um.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=O.default.rootData}else{let l=Fm.exec(t);if(!l)throw new Error(`Invalid JSON-pointer: ${t}`);let f=+l[1];if(s=l[2],s==="#"){if(f>=e)throw new Error(u("property/index",f));return n[e-f]}if(f>e)throw new Error(u("data",f));if(i=r[e-f],!s)return i}let a=i,o=s.split("/");for(let l of o)l&&(i=(0,b._)`${i}${(0,b.getProperty)((0,ct.unescapeJsonPointer)(l))}`,a=(0,b._)`${a} && ${i}`);return a;function u(l,f){return`Cannot access ${l} ${f} levels up, current level is ${e}`}}wt.getData=Fc});var Ci=w(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});var Vc=class extends Error{constructor(e){super("validation failed");this.errors=e,this.ajv=this.validation=!0}};Oi.default=Vc});var Ai=w(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});var Ni=Ur(),Jc=class extends Error{constructor(e,r,n){super(n||`can't resolve reference ${r} from id ${e}`);this.missingRef=(0,Ni.resolveUrl)(e,r),this.missingSchema=(0,Ni.normalizeId)((0,Ni.getFullPath)(this.missingRef))}};Ii.default=Jc});var qi=w(Ie=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});Ie.resolveSchema=Ie.getCompilingSchema=Ie.resolveRef=Ie.compileSchema=Ie.SchemaEnv=void 0;var je=k(),Vm=Ci(),qt=ut(),Me=Ur(),Lc=U(),Jm=Jr(),Lm=Ei(),Lr=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Me.normalizeId)(n==null?void 0:n[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n==null?void 0:n.$async,this.refs={}}};Ie.SchemaEnv=Lr;function ki(t){let e=Bc.call(this,t);if(e)return e;let r=(0,Me.getFullPath)(t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,a=new je.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),o;t.$async&&(o=a.scopeValue("Error",{ref:Vm.default,code:(0,je._)`require("ajv/dist/runtime/validation_error").default`}));let u=a.scopeName("validate");t.validateName=u;let l={gen:a,allErrors:this.opts.allErrors,data:qt.default.data,parentData:qt.default.parentData,parentDataProperty:qt.default.parentDataProperty,dataNames:[qt.default.data],dataPathArr:[je.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:a.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,je.stringify)(t.schema)}:{ref:t.schema}),validateName:u,ValidationError:o,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:je.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,je._)`""`,opts:this.opts,self:this},f;try{this._compilations.add(t),(0,Jm.validateFunctionCode)(l),a.optimize(this.opts.code.optimize);let h=a.toString();f=`${a.scopeRefs(qt.default.scope)}return ${h}`,this.opts.code.process&&(f=this.opts.code.process(f,t));let $=new Function(`${qt.default.self}`,`${qt.default.scope}`,f)(this,this.scope.get());if(this.scope.value(u,{ref:$}),$.errors=null,$.schema=t.schema,$.schemaEnv=t,t.$async&&($.$async=!0),this.opts.code.source===!0&&($.source={validateName:u,validateCode:h,scopeValues:a._values}),this.opts.unevaluated){let{props:g,items:v}=l;$.evaluated={props:g instanceof je.Name?void 0:g,items:v instanceof je.Name?void 0:v,dynamicProps:g instanceof je.Name,dynamicItems:v instanceof je.Name},$.source&&($.source.evaluated=(0,je.stringify)($.evaluated))}return t.validate=$,t}catch(h){throw delete t.validate,delete t.validateName,f&&this.logger.error("Error compiling schema, function code:",f),h}finally{this._compilations.delete(t)}}Ie.compileSchema=ki;function Bm(t,e,r){var n;r=(0,Me.resolveUrl)(e,r);let s=t.refs[r];if(s)return s;let i=Hm.call(this,t,r);if(i===void 0){let a=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:o}=this.opts;a&&(i=new Lr({schema:a,schemaId:o,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=Km.call(this,i)}Ie.resolveRef=Bm;function Km(t){return(0,Me.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:ki.call(this,t)}function Bc(t){for(let e of this._compilations)if(Gm(e,t))return e}Ie.getCompilingSchema=Bc;function Gm(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function Hm(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||rs.call(this,t,e)}function rs(t,e){let r=Lm.parse(e),n=(0,Me._getFullPath)(r),s=(0,Me.getFullPath)(t.baseId);if(Object.keys(t.schema).length>0&&n===s)return Di.call(this,r,t);let i=(0,Me.normalizeId)(n),a=this.refs[i]||this.schemas[i];if(typeof a=="string"){let o=rs.call(this,t,a);return typeof(o==null?void 0:o.schema)!="object"?void 0:Di.call(this,r,o)}if(typeof(a==null?void 0:a.schema)=="object"){if(a.validate||ki.call(this,a),i===(0,Me.normalizeId)(e)){let{schema:o}=a,{schemaId:u}=this.opts,l=o[u];return l&&(s=(0,Me.resolveUrl)(s,l)),new Lr({schema:o,schemaId:u,root:t,baseId:s})}return Di.call(this,r,a)}}Ie.resolveSchema=rs;var zm=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Di(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let o of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let u=r[(0,Lc.unescapeFragment)(o)];if(u===void 0)return;r=u;let l=typeof r=="object"&&r[this.opts.schemaId];!zm.has(o)&&l&&(e=(0,Me.resolveUrl)(e,l))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,Lc.schemaHasRulesButRef)(r,this.RULES)){let o=(0,Me.resolveUrl)(e,r.$ref);i=rs.call(this,n,o)}let{schemaId:a}=this.opts;if(i=i||new Lr({schema:r,schemaId:a,root:n,baseId:e}),i.schema!==i.root.schema)return i}});var Kc=w((L0,Wm)=>{Wm.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Zc=w(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.CodeGen=ce.Name=ce.nil=ce.stringify=ce.str=ce._=ce.KeywordCxt=void 0;var Ym=Jr();Object.defineProperty(ce,"KeywordCxt",{enumerable:!0,get:function(){return Ym.KeywordCxt}});var lr=k();Object.defineProperty(ce,"_",{enumerable:!0,get:function(){return lr._}});Object.defineProperty(ce,"str",{enumerable:!0,get:function(){return lr.str}});Object.defineProperty(ce,"stringify",{enumerable:!0,get:function(){return lr.stringify}});Object.defineProperty(ce,"nil",{enumerable:!0,get:function(){return lr.nil}});Object.defineProperty(ce,"Name",{enumerable:!0,get:function(){return lr.Name}});Object.defineProperty(ce,"CodeGen",{enumerable:!0,get:function(){return lr.CodeGen}});var Xm=Ci(),Gc=Ai(),Qm=pi(),Br=qi(),Zm=k(),Kr=Ur(),ns=xr(),ji=U(),Hc=Kc(),zc=(t,e)=>new RegExp(t,e);zc.code="new RegExp";var ey=["removeAdditional","useDefaults","coerceTypes"],ty=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),ry={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},ny={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},Wc=200;function sy(t){var e,r,n,s,i,a,o,u,l,f,h,_,$,g,v,E,S,R,W,B,K,be,lt,mr;let et=t.strict,ge=(e=t.code)===null||e===void 0?void 0:e.optimize,Ut=ge===!0||ge===void 0?1:ge||0,Ue=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:zc;return{strictSchema:(i=(s=t.strictSchema)!==null&&s!==void 0?s:et)!==null&&i!==void 0?i:!0,strictNumbers:(o=(a=t.strictNumbers)!==null&&a!==void 0?a:et)!==null&&o!==void 0?o:!0,strictTypes:(l=(u=t.strictTypes)!==null&&u!==void 0?u:et)!==null&&l!==void 0?l:"log",strictTuples:(h=(f=t.strictTuples)!==null&&f!==void 0?f:et)!==null&&h!==void 0?h:"log",strictRequired:($=(_=t.strictRequired)!==null&&_!==void 0?_:et)!==null&&$!==void 0?$:!1,code:t.code?ee(P({},t.code),{optimize:Ut,regExp:Ue}):{optimize:Ut,regExp:Ue},loopRequired:(g=t.loopRequired)!==null&&g!==void 0?g:Wc,loopEnum:(v=t.loopEnum)!==null&&v!==void 0?v:Wc,meta:(E=t.meta)!==null&&E!==void 0?E:!0,messages:(S=t.messages)!==null&&S!==void 0?S:!0,inlineRefs:(R=t.inlineRefs)!==null&&R!==void 0?R:!0,schemaId:(W=t.schemaId)!==null&&W!==void 0?W:"$id",addUsedSchema:(B=t.addUsedSchema)!==null&&B!==void 0?B:!0,validateSchema:(K=t.validateSchema)!==null&&K!==void 0?K:!0,validateFormats:(be=t.validateFormats)!==null&&be!==void 0?be:!0,unicodeRegExp:(lt=t.unicodeRegExp)!==null&&lt!==void 0?lt:!0,int32range:(mr=t.int32range)!==null&&mr!==void 0?mr:!0}}var ss=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts=P(P({},e),sy(e));let{es5:r,lines:n}=this.opts.code;this.scope=new Zm.ValueScope({scope:{},prefixes:ty,es5:r,lines:n}),this.logger=ly(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,Qm.getRules)(),Yc.call(this,ry,e,"NOT SUPPORTED"),Yc.call(this,ny,e,"DEPRECATED","warn"),this._metaOpts=uy.call(this),e.formats&&ay.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&oy.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),iy.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=Hc;n==="id"&&(s=P({},Hc),s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(f,h){await i.call(this,f.$schema);let _=this._addSchema(f,h);return _.validate||a.call(this,_)}async function i(f){f&&!this.getSchema(f)&&await s.call(this,{$ref:f},!0)}async function a(f){try{return this._compileSchemaEnv(f)}catch(h){if(!(h instanceof Gc.default))throw h;return o.call(this,h),await u.call(this,h.missingSchema),a.call(this,f)}}function o({missingSchema:f,missingRef:h}){if(this.refs[f])throw new Error(`AnySchema ${f} is loaded but ${h} cannot be resolved`)}async function u(f){let h=await l.call(this,f);this.refs[f]||await i.call(this,h.$schema),this.refs[f]||this.addSchema(h,f,r)}async function l(f){let h=this._loading[f];if(h)return h;try{return await(this._loading[f]=n(f))}finally{delete this._loading[f]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let a of e)this.addSchema(a,void 0,n,s);return this}let i;if(typeof e=="object"){let{schemaId:a}=this.opts;if(i=e[a],i!==void 0&&typeof i!="string")throw new Error(`schema ${a} must be string`)}return r=(0,Kr.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(e){let r;for(;typeof(r=Xc.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new Br.SchemaEnv({schema:{},schemaId:n});if(r=Br.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=Xc.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,Kr.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(fy.call(this,n,r),!r)return(0,ji.eachItem)(n,i=>Mi.call(this,i)),this;hy.call(this,r);let s=ee(P({},r),{type:(0,ns.getJSONTypes)(r.type),schemaType:(0,ns.getJSONTypes)(r.schemaType)});return(0,ji.eachItem)(n,s.type.length===0?i=>Mi.call(this,i,s):i=>s.type.forEach(a=>Mi.call(this,i,s,a))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let i=s.split("/").slice(1),a=e;for(let o of i)a=a[o];for(let o in n){let u=n[o];if(typeof u!="object")continue;let{$data:l}=u.definition,f=a[o];l&&f&&(a[o]=Qc(f))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let a,{schemaId:o}=this.opts;if(typeof e=="object")a=e[o];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let u=this._cache.get(e);if(u!==void 0)return u;n=(0,Kr.normalizeId)(a||n);let l=Kr.getSchemaRefs.call(this,e,n);return u=new Br.SchemaEnv({schema:e,schemaId:o,meta:r,baseId:n,localRefs:l}),this._cache.set(u.schema,u),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=u),s&&this.validateSchema(e,!0),u}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):Br.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{Br.compileSchema.call(this,e)}finally{this.opts=r}}};ce.default=ss;ss.ValidationError=Xm.default;ss.MissingRefError=Gc.default;function Yc(t,e,r,n="error"){for(let s in t){let i=s;i in e&&this.logger[n](`${r}: option ${s}. ${t[i]}`)}}function Xc(t){return t=(0,Kr.normalizeId)(t),this.schemas[t]||this.refs[t]}function iy(){let t=this.opts.schemas;if(!!t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function ay(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function oy(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function uy(){let t=P({},this.opts);for(let e of ey)delete t[e];return t}var cy={log(){},warn(){},error(){}};function ly(t){if(t===!1)return cy;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var dy=/^[a-z_$][a-z0-9_$:-]*$/i;function fy(t,e){let{RULES:r}=this;if((0,ji.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!dy.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function Mi(t,e,r){var n;let s=e==null?void 0:e.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,a=s?i.post:i.rules.find(({type:u})=>u===r);if(a||(a={type:r,rules:[]},i.rules.push(a)),i.keywords[t]=!0,!e)return;let o={keyword:t,definition:ee(P({},e),{type:(0,ns.getJSONTypes)(e.type),schemaType:(0,ns.getJSONTypes)(e.schemaType)})};e.before?py.call(this,a,o,e.before):a.rules.push(o),i.all[t]=o,(n=e.implements)===null||n===void 0||n.forEach(u=>this.addKeyword(u))}function py(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function hy(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=Qc(e)),t.validateSchema=this.compile(e,!0))}var my={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Qc(t){return{anyOf:[t,my]}}});var el=w(xi=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});var yy={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};xi.default=yy});var sl=w(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.callRef=jt.getValidate=void 0;var _y=Ai(),tl=Ne(),$e=k(),dr=ut(),rl=qi(),is=U(),gy={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:a,opts:o,self:u}=n,{root:l}=i;if((r==="#"||r==="#/")&&s===l.baseId)return h();let f=rl.resolveRef.call(u,l,s,r);if(f===void 0)throw new _y.default(s,r);if(f instanceof rl.SchemaEnv)return _(f);return $(f);function h(){if(i===l)return as(t,a,i,i.$async);let g=e.scopeValue("root",{ref:l});return as(t,(0,$e._)`${g}.validate`,l,l.$async)}function _(g){let v=nl(t,g);as(t,v,g,g.$async)}function $(g){let v=e.scopeValue("schema",o.code.source===!0?{ref:g,code:(0,$e.stringify)(g)}:{ref:g}),E=e.name("valid"),S=t.subschema({schema:g,dataTypes:[],schemaPath:$e.nil,topSchemaRef:v,errSchemaPath:r},E);t.mergeEvaluated(S),t.ok(E)}}};function nl(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,$e._)`${r.scopeValue("wrapper",{ref:e})}.validate`}jt.getValidate=nl;function as(t,e,r,n){let{gen:s,it:i}=t,{allErrors:a,schemaEnv:o,opts:u}=i,l=u.passContext?dr.default.this:$e.nil;n?f():h();function f(){if(!o.$async)throw new Error("async schema referenced by sync schema");let g=s.let("valid");s.try(()=>{s.code((0,$e._)`await ${(0,tl.callValidateCode)(t,e,l)}`),$(e),a||s.assign(g,!0)},v=>{s.if((0,$e._)`!(${v} instanceof ${i.ValidationError})`,()=>s.throw(v)),_(v),a||s.assign(g,!1)}),t.ok(g)}function h(){t.result((0,tl.callValidateCode)(t,e,l),()=>$(e),()=>_(e))}function _(g){let v=(0,$e._)`${g}.errors`;s.assign(dr.default.vErrors,(0,$e._)`${dr.default.vErrors} === null ? ${v} : ${dr.default.vErrors}.concat(${v})`),s.assign(dr.default.errors,(0,$e._)`${dr.default.vErrors}.length`)}function $(g){var v;if(!i.opts.unevaluated)return;let E=(v=r==null?void 0:r.validate)===null||v===void 0?void 0:v.evaluated;if(i.props!==!0)if(E&&!E.dynamicProps)E.props!==void 0&&(i.props=is.mergeEvaluated.props(s,E.props,i.props));else{let S=s.var("props",(0,$e._)`${g}.evaluated.props`);i.props=is.mergeEvaluated.props(s,S,i.props,$e.Name)}if(i.items!==!0)if(E&&!E.dynamicItems)E.items!==void 0&&(i.items=is.mergeEvaluated.items(s,E.items,i.items));else{let S=s.var("items",(0,$e._)`${g}.evaluated.items`);i.items=is.mergeEvaluated.items(s,S,i.items,$e.Name)}}}jt.callRef=as;jt.default=gy});var il=w(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});var vy=el(),wy=sl(),$y=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",vy.default,wy.default];Ui.default=$y});var al=w(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});var os=k(),$t=os.operators,us={maximum:{okStr:"<=",ok:$t.LTE,fail:$t.GT},minimum:{okStr:">=",ok:$t.GTE,fail:$t.LT},exclusiveMaximum:{okStr:"<",ok:$t.LT,fail:$t.GTE},exclusiveMinimum:{okStr:">",ok:$t.GT,fail:$t.LTE}},Ey={message:({keyword:t,schemaCode:e})=>(0,os.str)`must be ${us[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,os._)`{comparison: ${us[t].okStr}, limit: ${e}}`},Sy={keyword:Object.keys(us),type:"number",schemaType:"number",$data:!0,error:Ey,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,os._)`${r} ${us[e].fail} ${n} || isNaN(${r})`)}};Fi.default=Sy});var ol=w(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});var Gr=k(),Ty={message:({schemaCode:t})=>(0,Gr.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Gr._)`{multipleOf: ${t}}`},by={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Ty,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,a=e.let("res"),o=i?(0,Gr._)`Math.abs(Math.round(${a}) - ${a}) > 1e-${i}`:(0,Gr._)`${a} !== parseInt(${a})`;t.fail$data((0,Gr._)`(${n} === 0 || (${a} = ${r}/${n}, ${o}))`)}};Vi.default=by});var cl=w(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});function ul(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}Ji.default=ul;ul.code='require("ajv/dist/runtime/ucs2length").default'});var ll=w(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});var Mt=k(),Ry=U(),Py=cl(),Oy={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,Mt.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,Mt._)`{limit: ${t}}`},Cy={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Oy,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?Mt.operators.GT:Mt.operators.LT,a=s.opts.unicode===!1?(0,Mt._)`${r}.length`:(0,Mt._)`${(0,Ry.useFunc)(t.gen,Py.default)}(${r})`;t.fail$data((0,Mt._)`${a} ${i} ${n}`)}};Li.default=Cy});var dl=w(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});var Ny=Ne(),cs=k(),Iy={message:({schemaCode:t})=>(0,cs.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,cs._)`{pattern: ${t}}`},Ay={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Iy,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,a=i.opts.unicodeRegExp?"u":"",o=r?(0,cs._)`(new RegExp(${s}, ${a}))`:(0,Ny.usePattern)(t,n);t.fail$data((0,cs._)`!${o}.test(${e})`)}};Bi.default=Ay});var fl=w(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});var Hr=k(),ky={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,Hr.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Hr._)`{limit: ${t}}`},Dy={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:ky,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?Hr.operators.GT:Hr.operators.LT;t.fail$data((0,Hr._)`Object.keys(${r}).length ${s} ${n}`)}};Ki.default=Dy});var pl=w(Gi=>{"use strict";Object.defineProperty(Gi,"__esModule",{value:!0});var zr=Ne(),Wr=k(),qy=U(),jy={message:({params:{missingProperty:t}})=>(0,Wr.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Wr._)`{missingProperty: ${t}}`},My={keyword:"required",type:"object",schemaType:"array",$data:!0,error:jy,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:a}=t,{opts:o}=a;if(!i&&r.length===0)return;let u=r.length>=o.loopRequired;if(a.allErrors?l():f(),o.strictRequired){let $=t.parentSchema.properties,{definedProperties:g}=t.it;for(let v of r)if(($==null?void 0:$[v])===void 0&&!g.has(v)){let E=a.schemaEnv.baseId+a.errSchemaPath,S=`required property "${v}" is not defined at "${E}" (strictRequired)`;(0,qy.checkStrictMode)(a,S,a.opts.strictRequired)}}function l(){if(u||i)t.block$data(Wr.nil,h);else for(let $ of r)(0,zr.checkReportMissingProp)(t,$)}function f(){let $=e.let("missing");if(u||i){let g=e.let("valid",!0);t.block$data(g,()=>_($,g)),t.ok(g)}else e.if((0,zr.checkMissingProp)(t,r,$)),(0,zr.reportMissingProp)(t,$),e.else()}function h(){e.forOf("prop",n,$=>{t.setParams({missingProperty:$}),e.if((0,zr.noPropertyInData)(e,s,$,o.ownProperties),()=>t.error())})}function _($,g){t.setParams({missingProperty:$}),e.forOf($,n,()=>{e.assign(g,(0,zr.propertyInData)(e,s,$,o.ownProperties)),e.if((0,Wr.not)(g),()=>{t.error(),e.break()})},Wr.nil)}}};Gi.default=My});var hl=w(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});var Yr=k(),xy={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,Yr.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Yr._)`{limit: ${t}}`},Uy={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:xy,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?Yr.operators.GT:Yr.operators.LT;t.fail$data((0,Yr._)`${r}.length ${s} ${n}`)}};Hi.default=Uy});var ls=w(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});var ml=$i();ml.code='require("ajv/dist/runtime/equal").default';zi.default=ml});var yl=w(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});var Wi=xr(),le=k(),Fy=U(),Vy=ls(),Jy={message:({params:{i:t,j:e}})=>(0,le.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,le._)`{i: ${t}, j: ${e}}`},Ly={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Jy,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:a,it:o}=t;if(!n&&!s)return;let u=e.let("valid"),l=i.items?(0,Wi.getSchemaTypes)(i.items):[];t.block$data(u,f,(0,le._)`${a} === false`),t.ok(u);function f(){let g=e.let("i",(0,le._)`${r}.length`),v=e.let("j");t.setParams({i:g,j:v}),e.assign(u,!0),e.if((0,le._)`${g} > 1`,()=>(h()?_:$)(g,v))}function h(){return l.length>0&&!l.some(g=>g==="object"||g==="array")}function _(g,v){let E=e.name("item"),S=(0,Wi.checkDataTypes)(l,E,o.opts.strictNumbers,Wi.DataType.Wrong),R=e.const("indices",(0,le._)`{}`);e.for((0,le._)`;${g}--;`,()=>{e.let(E,(0,le._)`${r}[${g}]`),e.if(S,(0,le._)`continue`),l.length>1&&e.if((0,le._)`typeof ${E} == "string"`,(0,le._)`${E} += "_"`),e.if((0,le._)`typeof ${R}[${E}] == "number"`,()=>{e.assign(v,(0,le._)`${R}[${E}]`),t.error(),e.assign(u,!1).break()}).code((0,le._)`${R}[${E}] = ${g}`)})}function $(g,v){let E=(0,Fy.useFunc)(e,Vy.default),S=e.name("outer");e.label(S).for((0,le._)`;${g}--;`,()=>e.for((0,le._)`${v} = ${g}; ${v}--;`,()=>e.if((0,le._)`${E}(${r}[${g}], ${r}[${v}])`,()=>{t.error(),e.assign(u,!1).break(S)})))}}};Yi.default=Ly});var _l=w(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});var Xi=k(),By=U(),Ky=ls(),Gy={message:"must be equal to constant",params:({schemaCode:t})=>(0,Xi._)`{allowedValue: ${t}}`},Hy={keyword:"const",$data:!0,error:Gy,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,Xi._)`!${(0,By.useFunc)(e,Ky.default)}(${r}, ${s})`):t.fail((0,Xi._)`${i} !== ${r}`)}};Qi.default=Hy});var gl=w(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0});var Xr=k(),zy=U(),Wy=ls(),Yy={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,Xr._)`{allowedValues: ${t}}`},Xy={keyword:"enum",schemaType:"array",$data:!0,error:Yy,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:a}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let o=s.length>=a.opts.loopEnum,u=(0,zy.useFunc)(e,Wy.default),l;if(o||n)l=e.let("valid"),t.block$data(l,f);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let _=e.const("vSchema",i);l=(0,Xr.or)(...s.map(($,g)=>h(_,g)))}t.pass(l);function f(){e.assign(l,!1),e.forOf("v",i,_=>e.if((0,Xr._)`${u}(${r}, ${_})`,()=>e.assign(l,!0).break()))}function h(_,$){let g=s[$];return typeof g=="object"&&g!==null?(0,Xr._)`${u}(${r}, ${_}[${$}])`:(0,Xr._)`${r} === ${g}`}}};Zi.default=Xy});var vl=w(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});var Qy=al(),Zy=ol(),e_=ll(),t_=dl(),r_=fl(),n_=pl(),s_=hl(),i_=yl(),a_=_l(),o_=gl(),u_=[Qy.default,Zy.default,e_.default,t_.default,r_.default,n_.default,s_.default,i_.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},a_.default,o_.default];ea.default=u_});var ra=w(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.validateAdditionalItems=void 0;var xt=k(),ta=U(),c_={message:({params:{len:t}})=>(0,xt.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,xt._)`{limit: ${t}}`},l_={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:c_,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,ta.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}wl(t,n)}};function wl(t,e){let{gen:r,schema:n,data:s,keyword:i,it:a}=t;a.items=!0;let o=r.const("len",(0,xt._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,xt._)`${o} <= ${e.length}`);else if(typeof n=="object"&&!(0,ta.alwaysValidSchema)(a,n)){let l=r.var("valid",(0,xt._)`${o} <= ${e.length}`);r.if((0,xt.not)(l),()=>u(l)),t.ok(l)}function u(l){r.forRange("i",e.length,o,f=>{t.subschema({keyword:i,dataProp:f,dataPropType:ta.Type.Num},l),a.allErrors||r.if((0,xt.not)(l),()=>r.break())})}}Qr.validateAdditionalItems=wl;Qr.default=l_});var na=w(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.validateTuple=void 0;var $l=k(),ds=U(),d_=Ne(),f_={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return El(t,"additionalItems",e);r.items=!0,!(0,ds.alwaysValidSchema)(r,e)&&t.ok((0,d_.validateArray)(t))}};function El(t,e,r=t.schema){let{gen:n,parentSchema:s,data:i,keyword:a,it:o}=t;f(s),o.opts.unevaluated&&r.length&&o.items!==!0&&(o.items=ds.mergeEvaluated.items(n,r.length,o.items));let u=n.name("valid"),l=n.const("len",(0,$l._)`${i}.length`);r.forEach((h,_)=>{(0,ds.alwaysValidSchema)(o,h)||(n.if((0,$l._)`${l} > ${_}`,()=>t.subschema({keyword:a,schemaProp:_,dataProp:_},u)),t.ok(u))});function f(h){let{opts:_,errSchemaPath:$}=o,g=r.length,v=g===h.minItems&&(g===h.maxItems||h[e]===!1);if(_.strictTuples&&!v){let E=`"${a}" is ${g}-tuple, but minItems or maxItems/${e} are not specified or different at path "${$}"`;(0,ds.checkStrictMode)(o,E,_.strictTuples)}}}Zr.validateTuple=El;Zr.default=f_});var Sl=w(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});var p_=na(),h_={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,p_.validateTuple)(t,"items")};sa.default=h_});var bl=w(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});var Tl=k(),m_=U(),y_=Ne(),__=ra(),g_={message:({params:{len:t}})=>(0,Tl.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Tl._)`{limit: ${t}}`},v_={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:g_,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,m_.alwaysValidSchema)(n,e)&&(s?(0,__.validateAdditionalItems)(t,s):t.ok((0,y_.validateArray)(t)))}};ia.default=v_});var Rl=w(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});var Ae=k(),fs=U(),w_={message:({params:{min:t,max:e}})=>e===void 0?(0,Ae.str)`must contain at least ${t} valid item(s)`:(0,Ae.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Ae._)`{minContains: ${t}}`:(0,Ae._)`{minContains: ${t}, maxContains: ${e}}`},$_={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:w_,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t,a,o,{minContains:u,maxContains:l}=n;i.opts.next?(a=u===void 0?1:u,o=l):a=1;let f=e.const("len",(0,Ae._)`${s}.length`);if(t.setParams({min:a,max:o}),o===void 0&&a===0){(0,fs.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(o!==void 0&&a>o){(0,fs.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,fs.alwaysValidSchema)(i,r)){let v=(0,Ae._)`${f} >= ${a}`;o!==void 0&&(v=(0,Ae._)`${v} && ${f} <= ${o}`),t.pass(v);return}i.items=!0;let h=e.name("valid");o===void 0&&a===1?$(h,()=>e.if(h,()=>e.break())):a===0?(e.let(h,!0),o!==void 0&&e.if((0,Ae._)`${s}.length > 0`,_)):(e.let(h,!1),_()),t.result(h,()=>t.reset());function _(){let v=e.name("_valid"),E=e.let("count",0);$(v,()=>e.if(v,()=>g(E)))}function $(v,E){e.forRange("i",0,f,S=>{t.subschema({keyword:"contains",dataProp:S,dataPropType:fs.Type.Num,compositeRule:!0},v),E()})}function g(v){e.code((0,Ae._)`${v}++`),o===void 0?e.if((0,Ae._)`${v} >= ${a}`,()=>e.assign(h,!0).break()):(e.if((0,Ae._)`${v} > ${o}`,()=>e.assign(h,!1).break()),a===1?e.assign(h,!0):e.if((0,Ae._)`${v} >= ${a}`,()=>e.assign(h,!0)))}}};aa.default=$_});var Cl=w(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.validateSchemaDeps=Ze.validatePropertyDeps=Ze.error=void 0;var oa=k(),E_=U(),en=Ne();Ze.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,oa.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,oa._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var S_={keyword:"dependencies",type:"object",schemaType:"object",error:Ze.error,code(t){let[e,r]=T_(t);Pl(t,e),Ol(t,r)}};function T_({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function Pl(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let i=r.let("missing");for(let a in e){let o=e[a];if(o.length===0)continue;let u=(0,en.propertyInData)(r,n,a,s.opts.ownProperties);t.setParams({property:a,depsCount:o.length,deps:o.join(", ")}),s.allErrors?r.if(u,()=>{for(let l of o)(0,en.checkReportMissingProp)(t,l)}):(r.if((0,oa._)`${u} && (${(0,en.checkMissingProp)(t,o,i)})`),(0,en.reportMissingProp)(t,i),r.else())}}Ze.validatePropertyDeps=Pl;function Ol(t,e=t.schema){let{gen:r,data:n,keyword:s,it:i}=t,a=r.name("valid");for(let o in e)(0,E_.alwaysValidSchema)(i,e[o])||(r.if((0,en.propertyInData)(r,n,o,i.opts.ownProperties),()=>{let u=t.subschema({keyword:s,schemaProp:o},a);t.mergeValidEvaluated(u,a)},()=>r.var(a,!0)),t.ok(a))}Ze.validateSchemaDeps=Ol;Ze.default=S_});var Il=w(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});var Nl=k(),b_=U(),R_={message:"property name must be valid",params:({params:t})=>(0,Nl._)`{propertyName: ${t.propertyName}}`},P_={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:R_,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,b_.alwaysValidSchema)(s,r))return;let i=e.name("valid");e.forIn("key",n,a=>{t.setParams({propertyName:a}),t.subschema({keyword:"propertyNames",data:a,dataTypes:["string"],propertyName:a,compositeRule:!0},i),e.if((0,Nl.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};ua.default=P_});var la=w(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});var ps=Ne(),xe=k(),O_=ut(),hs=U(),C_={message:"must NOT have additional properties",params:({params:t})=>(0,xe._)`{additionalProperty: ${t.additionalProperty}}`},N_={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:C_,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:a}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:o,opts:u}=a;if(a.props=!0,u.removeAdditional!=="all"&&(0,hs.alwaysValidSchema)(a,r))return;let l=(0,ps.allSchemaProperties)(n.properties),f=(0,ps.allSchemaProperties)(n.patternProperties);h(),t.ok((0,xe._)`${i} === ${O_.default.errors}`);function h(){e.forIn("key",s,E=>{!l.length&&!f.length?g(E):e.if(_(E),()=>g(E))})}function _(E){let S;if(l.length>8){let R=(0,hs.schemaRefOrVal)(a,n.properties,"properties");S=(0,ps.isOwnProperty)(e,R,E)}else l.length?S=(0,xe.or)(...l.map(R=>(0,xe._)`${E} === ${R}`)):S=xe.nil;return f.length&&(S=(0,xe.or)(S,...f.map(R=>(0,xe._)`${(0,ps.usePattern)(t,R)}.test(${E})`))),(0,xe.not)(S)}function $(E){e.code((0,xe._)`delete ${s}[${E}]`)}function g(E){if(u.removeAdditional==="all"||u.removeAdditional&&r===!1){$(E);return}if(r===!1){t.setParams({additionalProperty:E}),t.error(),o||e.break();return}if(typeof r=="object"&&!(0,hs.alwaysValidSchema)(a,r)){let S=e.name("valid");u.removeAdditional==="failing"?(v(E,S,!1),e.if((0,xe.not)(S),()=>{t.reset(),$(E)})):(v(E,S),o||e.if((0,xe.not)(S),()=>e.break()))}}function v(E,S,R){let W={keyword:"additionalProperties",dataProp:E,dataPropType:hs.Type.Str};R===!1&&Object.assign(W,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(W,S)}}};ca.default=N_});var Dl=w(fa=>{"use strict";Object.defineProperty(fa,"__esModule",{value:!0});var I_=Jr(),Al=Ne(),da=U(),kl=la(),A_={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&kl.default.code(new I_.KeywordCxt(i,kl.default,"additionalProperties"));let a=(0,Al.allSchemaProperties)(r);for(let h of a)i.definedProperties.add(h);i.opts.unevaluated&&a.length&&i.props!==!0&&(i.props=da.mergeEvaluated.props(e,(0,da.toHash)(a),i.props));let o=a.filter(h=>!(0,da.alwaysValidSchema)(i,r[h]));if(o.length===0)return;let u=e.name("valid");for(let h of o)l(h)?f(h):(e.if((0,Al.propertyInData)(e,s,h,i.opts.ownProperties)),f(h),i.allErrors||e.else().var(u,!0),e.endIf()),t.it.definedProperties.add(h),t.ok(u);function l(h){return i.opts.useDefaults&&!i.compositeRule&&r[h].default!==void 0}function f(h){t.subschema({keyword:"properties",schemaProp:h,dataProp:h},u)}}};fa.default=A_});var xl=w(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});var ql=Ne(),ms=k(),jl=U(),Ml=U(),k_={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:a}=i,o=(0,ql.allSchemaProperties)(r),u=o.filter(v=>(0,jl.alwaysValidSchema)(i,r[v]));if(o.length===0||u.length===o.length&&(!i.opts.unevaluated||i.props===!0))return;let l=a.strictSchema&&!a.allowMatchingProperties&&s.properties,f=e.name("valid");i.props!==!0&&!(i.props instanceof ms.Name)&&(i.props=(0,Ml.evaluatedPropsToName)(e,i.props));let{props:h}=i;_();function _(){for(let v of o)l&&$(v),i.allErrors?g(v):(e.var(f,!0),g(v),e.if(f))}function $(v){for(let E in l)new RegExp(v).test(E)&&(0,jl.checkStrictMode)(i,`property ${E} matches pattern ${v} (use allowMatchingProperties)`)}function g(v){e.forIn("key",n,E=>{e.if((0,ms._)`${(0,ql.usePattern)(t,v)}.test(${E})`,()=>{let S=u.includes(v);S||t.subschema({keyword:"patternProperties",schemaProp:v,dataProp:E,dataPropType:Ml.Type.Str},f),i.opts.unevaluated&&h!==!0?e.assign((0,ms._)`${h}[${E}]`,!0):!S&&!i.allErrors&&e.if((0,ms.not)(f),()=>e.break())})})}}};pa.default=k_});var Ul=w(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});var D_=U(),q_={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,D_.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};ha.default=q_});var Fl=w(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});var j_=Ne(),M_={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:j_.validateUnion,error:{message:"must match a schema in anyOf"}};ma.default=M_});var Vl=w(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});var ys=k(),x_=U(),U_={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,ys._)`{passingSchemas: ${t.passing}}`},F_={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:U_,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,a=e.let("valid",!1),o=e.let("passing",null),u=e.name("_valid");t.setParams({passing:o}),e.block(l),t.result(a,()=>t.reset(),()=>t.error(!0));function l(){i.forEach((f,h)=>{let _;(0,x_.alwaysValidSchema)(s,f)?e.var(u,!0):_=t.subschema({keyword:"oneOf",schemaProp:h,compositeRule:!0},u),h>0&&e.if((0,ys._)`${u} && ${a}`).assign(a,!1).assign(o,(0,ys._)`[${o}, ${h}]`).else(),e.if(u,()=>{e.assign(a,!0),e.assign(o,h),_&&t.mergeEvaluated(_,ys.Name)})})}}};ya.default=F_});var Jl=w(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});var V_=U(),J_={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((i,a)=>{if((0,V_.alwaysValidSchema)(n,i))return;let o=t.subschema({keyword:"allOf",schemaProp:a},s);t.ok(s),t.mergeEvaluated(o)})}};_a.default=J_});var Kl=w(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});var _s=k(),Ll=U(),L_={message:({params:t})=>(0,_s.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,_s._)`{failingKeyword: ${t.ifClause}}`},B_={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:L_,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,Ll.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=Bl(n,"then"),i=Bl(n,"else");if(!s&&!i)return;let a=e.let("valid",!0),o=e.name("_valid");if(u(),t.reset(),s&&i){let f=e.let("ifClause");t.setParams({ifClause:f}),e.if(o,l("then",f),l("else",f))}else s?e.if(o,l("then")):e.if((0,_s.not)(o),l("else"));t.pass(a,()=>t.error(!0));function u(){let f=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},o);t.mergeEvaluated(f)}function l(f,h){return()=>{let _=t.subschema({keyword:f},o);e.assign(a,o),t.mergeValidEvaluated(_,a),h?e.assign(h,(0,_s._)`${f}`):t.setParams({ifClause:f})}}}};function Bl(t,e){let r=t.schema[e];return r!==void 0&&!(0,Ll.alwaysValidSchema)(t,r)}ga.default=B_});var Gl=w(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});var K_=U(),G_={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,K_.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};va.default=G_});var Hl=w(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});var H_=ra(),z_=Sl(),W_=na(),Y_=bl(),X_=Rl(),Q_=Cl(),Z_=Il(),eg=la(),tg=Dl(),rg=xl(),ng=Ul(),sg=Fl(),ig=Vl(),ag=Jl(),og=Kl(),ug=Gl();function cg(t=!1){let e=[ng.default,sg.default,ig.default,ag.default,og.default,ug.default,Z_.default,eg.default,Q_.default,tg.default,rg.default];return t?e.push(z_.default,Y_.default):e.push(H_.default,W_.default),e.push(X_.default),e}wa.default=cg});var zl=w($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});var te=k(),lg={message:({schemaCode:t})=>(0,te.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,te._)`{format: ${t}}`},dg={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:lg,code(t,e){let{gen:r,data:n,$data:s,schema:i,schemaCode:a,it:o}=t,{opts:u,errSchemaPath:l,schemaEnv:f,self:h}=o;if(!u.validateFormats)return;s?_():$();function _(){let g=r.scopeValue("formats",{ref:h.formats,code:u.code.formats}),v=r.const("fDef",(0,te._)`${g}[${a}]`),E=r.let("fType"),S=r.let("format");r.if((0,te._)`typeof ${v} == "object" && !(${v} instanceof RegExp)`,()=>r.assign(E,(0,te._)`${v}.type || "string"`).assign(S,(0,te._)`${v}.validate`),()=>r.assign(E,(0,te._)`"string"`).assign(S,v)),t.fail$data((0,te.or)(R(),W()));function R(){return u.strictSchema===!1?te.nil:(0,te._)`${a} && !${S}`}function W(){let B=f.$async?(0,te._)`(${v}.async ? await ${S}(${n}) : ${S}(${n}))`:(0,te._)`${S}(${n})`,K=(0,te._)`(typeof ${S} == "function" ? ${B} : ${S}.test(${n}))`;return(0,te._)`${S} && ${S} !== true && ${E} === ${e} && !${K}`}}function $(){let g=h.formats[i];if(!g){R();return}if(g===!0)return;let[v,E,S]=W(g);v===e&&t.pass(B());function R(){if(u.strictSchema===!1){h.logger.warn(K());return}throw new Error(K());function K(){return`unknown format "${i}" ignored in schema at path "${l}"`}}function W(K){let be=K instanceof RegExp?(0,te.regexpCode)(K):u.code.formats?(0,te._)`${u.code.formats}${(0,te.getProperty)(i)}`:void 0,lt=r.scopeValue("formats",{key:i,ref:K,code:be});return typeof K=="object"&&!(K instanceof RegExp)?[K.type||"string",K.validate,(0,te._)`${lt}.validate`]:["string",K,lt]}function B(){if(typeof g=="object"&&!(g instanceof RegExp)&&g.async){if(!f.$async)throw new Error("async format in sync schema");return(0,te._)`await ${S}(${n})`}return typeof E=="function"?(0,te._)`${S}(${n})`:(0,te._)`${S}.test(${n})`}}}};$a.default=dg});var Wl=w(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});var fg=zl(),pg=[fg.default];Ea.default=pg});var Yl=w(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.contentVocabulary=fr.metadataVocabulary=void 0;fr.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];fr.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var Ql=w(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});var hg=il(),mg=vl(),yg=Hl(),_g=Wl(),Xl=Yl(),gg=[hg.default,mg.default,(0,yg.default)(),_g.default,Xl.metadataVocabulary,Xl.contentVocabulary];Sa.default=gg});var Zl=w(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.DiscrError=void 0;var vg;(function(t){t.Tag="tag",t.Mapping="mapping"})(vg=tn.DiscrError||(tn.DiscrError={}))});var ed=w(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});var pr=k(),Ta=Zl(),wg={message:({params:{discrError:t,tagName:e}})=>t===Ta.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,pr._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},$g={keyword:"discriminator",type:"object",schemaType:"object",error:wg,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:a}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let o=n.propertyName;if(typeof o!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!a)throw new Error("discriminator: requires oneOf keyword");let u=e.let("valid",!1),l=e.const("tag",(0,pr._)`${r}${(0,pr.getProperty)(o)}`);e.if((0,pr._)`typeof ${l} == "string"`,()=>f(),()=>t.error(!1,{discrError:Ta.DiscrError.Tag,tag:l,tagName:o})),t.ok(u);function f(){let $=_();e.if(!1);for(let g in $)e.elseIf((0,pr._)`${l} === ${g}`),e.assign(u,h($[g]));e.else(),t.error(!1,{discrError:Ta.DiscrError.Mapping,tag:l,tagName:o}),e.endIf()}function h($){let g=e.name("valid"),v=t.subschema({keyword:"oneOf",schemaProp:$},g);return t.mergeEvaluated(v,pr.Name),g}function _(){var $;let g={},v=S(s),E=!0;for(let B=0;B<a.length;B++){let K=a[B],be=($=K.properties)===null||$===void 0?void 0:$[o];if(typeof be!="object")throw new Error(`discriminator: oneOf schemas must have "properties/${o}"`);E=E&&(v||S(K)),R(be,B)}if(!E)throw new Error(`discriminator: "${o}" must be required`);return g;function S({required:B}){return Array.isArray(B)&&B.includes(o)}function R(B,K){if(B.const)W(B.const,K);else if(B.enum)for(let be of B.enum)W(be,K);else throw new Error(`discriminator: "properties/${o}" must have "const" or "enum"`)}function W(B,K){if(typeof B!="string"||B in g)throw new Error(`discriminator: "${o}" values must be unique strings`);g[B]=K}}}};ba.default=$g});var td=w((Nw,Eg)=>{Eg.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var sd=w((ie,nd)=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.CodeGen=ie.Name=ie.nil=ie.stringify=ie.str=ie._=ie.KeywordCxt=void 0;var Sg=Zc(),Tg=Ql(),bg=ed(),rd=td(),Rg=["/properties"],gs="http://json-schema.org/draft-07/schema",Ra=class extends Sg.default{_addVocabularies(){super._addVocabularies(),Tg.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(bg.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(rd,Rg):rd;this.addMetaSchema(e,gs,!1),this.refs["http://json-schema.org/schema"]=gs}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(gs)?gs:void 0)}};nd.exports=ie=Ra;Object.defineProperty(ie,"__esModule",{value:!0});ie.default=Ra;var Pg=Jr();Object.defineProperty(ie,"KeywordCxt",{enumerable:!0,get:function(){return Pg.KeywordCxt}});var hr=k();Object.defineProperty(ie,"_",{enumerable:!0,get:function(){return hr._}});Object.defineProperty(ie,"str",{enumerable:!0,get:function(){return hr.str}});Object.defineProperty(ie,"stringify",{enumerable:!0,get:function(){return hr.stringify}});Object.defineProperty(ie,"nil",{enumerable:!0,get:function(){return hr.nil}});Object.defineProperty(ie,"Name",{enumerable:!0,get:function(){return hr.Name}});Object.defineProperty(ie,"CodeGen",{enumerable:!0,get:function(){return hr.CodeGen}})});var Bg={};Bd(Bg,{handler:()=>Lg});var un=require("crypto"),xs=require("url"),mo=require("path");var no=require("https"),so=require("stream"),io=require("util");function Yt(t){return typeof t=="object"&&!Array.isArray(t)&&t!==null}function Tr(t){return JSON.parse(t,(e,r)=>(typeof r=="object"&&!Array.isArray(r)&&r!==null&&(delete r.__proto__,delete r.constructor),r))}var he=class extends Error{},ae=class extends he{constructor(e,r){let n=r!=null?`${e}: ${r}`:e;super(n)}},Rs=class extends he{},Ps=class extends he{},Os=class extends he{},de=class extends he{},Cs=class extends he{};var Xt=class extends he{},Qt=class extends he{},br=class extends he{},bt=class extends he{},Ns=class extends he{},Is=class extends he{},Rt=class extends he{constructor(e,r){super(`Failed to fetch ${e}: ${r}`)}},Zt=class extends Rt{},ke=class extends he{};var As=class{constructor(e){this.defaultRequestOptions=P({timeout:500,responseTimeout:1500},e==null?void 0:e.defaultRequestOptions)}async fetch(e,r,n){r=P(P({},this.defaultRequestOptions),r);try{return await on(e,r,n)}catch(s){if(s instanceof Zt)throw s;return on(e,r,n)}}};async function on(t,e,r){let n;return new Promise((s,i)=>{let a=(0,no.request)(t,P({method:"GET"},e),u=>{(0,so.pipeline)([u,Gd(t,u.statusCode,u.headers)],o)});(e==null?void 0:e.responseTimeout)&&(n=setTimeout(()=>o(new Rt(t,`Response time-out (after ${e.responseTimeout} ms.)`)),e.responseTimeout),n.unref());function o(...u){var f;if(n&&clearTimeout(n),u[0]==null){s(u[1]);return}(f=a.socket)==null||f.emit("agentRemove");let l=u[0];l instanceof Rt||(l=new Rt(t,l.message)),a.destroy(),i(l)}a.on("error",o),a.end(r)})}function Gd(t,e,r){return async n=>{var i;if(e===429)throw new Rt(t,"Too many requests");if(e!==200)throw new Zt(t,`Status code is ${e}, expected 200`);if(!((i=r["content-type"])==null?void 0:i.toLowerCase().startsWith("application/json")))throw new Zt(t,`Content-type is "${r["content-type"]}", expected "application/json"`);let s=[];for await(let a of n)s.push(a);try{return Tr(new io.TextDecoder("utf8",{fatal:!0,ignoreBOM:!0}).decode(Buffer.concat(s)))}catch(a){throw new Zt(t,a)}}}var Hd=["alg"],zd=["e","kid","kty","n","use"];async function Wd(t){let e=await on(t);return ks(e),e}async function ao(t,e){if(!e.header.kid)throw new br("JWT header does not have valid kid claim");let r=(await Wd(t)).keys.find(n=>n.kid===e.header.kid);if(!r)throw new bt(`JWK for kid "${e.header.kid}" not found in the JWKS`);return r}function ks(t){if(!t)throw new Xt("JWKS empty");if(!Yt(t))throw new Xt("JWKS should be an object");if(!Object.keys(t).includes("keys"))throw new Xt("JWKS does not include keys");if(!Array.isArray(t.keys))throw new Xt("JWKS keys should be an array");for(let e of t.keys)oo(e)}function oo(t){if(!t)throw new Qt("JWK empty");if(!Yt(t))throw new Qt("JWK should be an object");for(let e of zd)if(typeof t[e]!="string")throw new Qt(`JWK ${e} should be a string`);for(let e of Hd)if(e in t&&typeof t[e]!="string")throw new Qt(`JWK ${e} should be a string`)}function uo(t){try{return ks(t),!0}catch{return!1}}function co(t){try{return oo(t),!0}catch{return!1}}var lo=class{constructor(e){this.waitingUris=new Map,this.waitSeconds=(e==null?void 0:e.waitSeconds)??10}async wait(e){if(this.waitingUris.has(e))throw new Ns("Not allowed to fetch JWKS yet, still waiting for back off period to end")}release(e){let r=this.waitingUris.get(e);r&&(clearTimeout(r),this.waitingUris.delete(e))}registerFailedAttempt(e){let r=setTimeout(()=>{this.waitingUris.delete(e)},this.waitSeconds*1e3).unref();this.waitingUris.set(e,r)}registerSuccessfulAttempt(e){this.release(e)}},Ds=class{constructor(e){this.jwksCache=new Map,this.fetchingJwks=new Map,this.penaltyBox=(e==null?void 0:e.penaltyBox)??new lo,this.fetcher=(e==null?void 0:e.fetcher)??new As}addJwks(e,r){this.jwksCache.set(e,r)}async getJwks(e){let r=this.fetchingJwks.get(e);if(r)return r;let n=this.fetcher.fetch(e).then(i=>(ks(i),i));this.fetchingJwks.set(e,n);let s;try{s=await n}finally{this.fetchingJwks.delete(e)}return this.jwksCache.set(e,s),s}getCachedJwk(e,r){if(typeof r.header.kid!="string")throw new br("JWT header does not have valid kid claim");if(!this.jwksCache.has(e))throw new Is(`JWKS for uri ${e} not yet available in cache`);let n=this.jwksCache.get(e).keys.find(s=>s.kid===r.header.kid);if(!n)throw new bt(`JWK for kid ${r.header.kid} not found in the JWKS`);return n}async getJwk(e,r){var i;if(typeof r.header.kid!="string")throw new br("JWT header does not have valid kid claim");let n=(i=this.jwksCache.get(e))==null?void 0:i.keys.find(a=>a.kid===r.header.kid);if(n)return n;if(await this.penaltyBox.wait(e,r.header.kid),n=(await this.getJwks(e)).keys.find(a=>a.kid===r.header.kid),n)this.penaltyBox.registerSuccessfulAttempt(e,r.header.kid);else throw this.penaltyBox.registerFailedAttempt(e,r.header.kid),new bt(`JWK for kid "${r.header.kid}" not found in the JWKS`);return n}};var Pt;(function(t){t[t.Universal=0]="Universal"})(Pt||(Pt={}));var Ot;(function(t){t[t.Primitive=0]="Primitive",t[t.Constructed=1]="Constructed"})(Ot||(Ot={}));var Ct;(function(t){t[t.BitString=3]="BitString",t[t.ObjectIdentifier=6]="ObjectIdentifier",t[t.Sequence=16]="Sequence",t[t.Null=5]="Null",t[t.Integer=2]="Integer"})(Ct||(Ct={}));function Rr(t){let e=t.class<<7|t.primitiveOrConstructed<<5|t.tag;return Buffer.from([e])}function Pr(t){if(t<128)return Buffer.from([t]);let e=[];for(;t>0;)e.push(t%256),t=t>>8;return e.reverse(),Buffer.from([128|e.length,...e])}function fo(t){return Buffer.concat([Rr({class:Pt.Universal,primitiveOrConstructed:Ot.Primitive,tag:Ct.Integer}),Pr(t.length),t])}function Yd(t){let e=t.split(".").map(i=>parseInt(i)),r=e[0]*40+e[1],n=e.slice(2).reduce((i,a)=>{let o=[];do o.push(a%128),a=a>>7;while(a);return i.concat(o.map((u,l)=>l?u+128:u).reverse())},[]),s=Buffer.from([r,...n]);return Buffer.concat([Rr({class:Pt.Universal,primitiveOrConstructed:Ot.Primitive,tag:Ct.ObjectIdentifier}),Pr(s.length),s])}function Xd(t){let e=Buffer.concat([Buffer.from([0]),t]);return Buffer.concat([Rr({class:Pt.Universal,primitiveOrConstructed:Ot.Primitive,tag:Ct.BitString}),Pr(e.length),e])}function qs(t){let e=Buffer.concat(t);return Buffer.concat([Rr({class:Pt.Universal,primitiveOrConstructed:Ot.Constructed,tag:Ct.Sequence}),Pr(e.length),e])}function Qd(){return Buffer.concat([Rr({class:Pt.Universal,primitiveOrConstructed:Ot.Primitive,tag:Ct.Null}),Pr(0)])}var Zd=qs([Yd("1.2.840.113549.1.1.1"),Qd()]);function po(t,e){return qs([Zd,Xd(qs([fo(t),fo(e)]))])}function Nt(t,e,r){if(!e)throw new ke(`Missing ${t}. Expected: ${r}`);if(typeof e!="string")throw new ke(`${t} is not of type string`);if(r!==e)throw new ke(`${t} not allowed: ${e}. Expected: ${r}`)}function dt(t,e,r){if(!e)throw new ke(`Missing ${t}. ${js(r)}`);if(typeof e!="string")throw new ke(`${t} is not of type string`);return er(t,e,r)}function er(t,e,r){if(!e)throw new ke(`Missing ${t}. ${js(r)}`);let n=new Set(Array.isArray(r)?r:[r]);if(typeof e=="string"&&(e=[e]),!Array.isArray(e))throw new ke(`${t} is not an array`);if(!e.some(i=>{if(typeof i!="string")throw new ke(`${t} includes elements that are not of type string`);return n.has(i)}))throw new ke(`${t} not allowed: ${e.join(", ")}. ${js(r)}`)}function js(t){return Array.isArray(t)?t.length>1?`Expected one of: ${t.join(", ")}`:`Expected: ${t[0]}`:`Expected: ${t}`}function ef(t){if(!Yt(t))throw new ae("JWT header is not an object");if(t.alg!==void 0&&typeof t.alg!="string")throw new ae("JWT header alg claim is not a string");if(t.kid!==void 0&&typeof t.kid!="string")throw new ae("JWT header kid claim is not a string")}function tf(t){if(!Yt(t))throw new ae("JWT payload is not an object");if(t.exp!==void 0&&!Number.isFinite(t.exp))throw new ae("JWT payload exp claim is not a number");if(t.iss!==void 0&&typeof t.iss!="string")throw new ae("JWT payload iss claim is not a string");if(t.aud!==void 0&&typeof t.aud!="string"&&(!Array.isArray(t.aud)||t.aud.some(e=>typeof e!="string")))throw new ae("JWT payload aud claim is not a string or array of strings");if(t.nbf!==void 0&&!Number.isFinite(t.nbf))throw new ae("JWT payload nbf claim is not a number");if(t.iat!==void 0&&!Number.isFinite(t.iat))throw new ae("JWT payload iat claim is not a number");if(t.scope!==void 0&&typeof t.scope!="string")throw new ae("JWT payload scope claim is not a string");if(t.jti!==void 0&&typeof t.jti!="string")throw new ae("JWT payload jti claim is not a string")}function ho(t){if(!t)throw new ae("Empty JWT");if(typeof t!="string")throw new ae("JWT is not a string");if(!t.match(/^[A-Za-z0-9_-]+\.[A-Za-z0-9_-]+\.[A-Za-z0-9_-]+$/))throw new ae("JWT string does not consist of exactly 3 parts (header, payload, signature)");let[e,r,n]=t.split("."),[s,i]=[e,r].map(u=>Buffer.from(u,"base64").toString("utf8")),a;try{a=Tr(s)}catch(u){throw new ae("Invalid JWT. Header is not a valid JSON object",u)}ef(a);let o;try{o=Tr(i)}catch(u){throw new ae("Invalid JWT. Payload is not a valid JSON object",u)}return tf(o),{header:a,headerB64:e,payload:o,payloadB64:r,signatureB64:n}}function Ms(t,e){var r;if(t.exp!==void 0&&t.exp+(e.graceSeconds??0)<Date.now()/1e3)throw new Ps(`Token expired at ${new Date(t.exp*1e3).toISOString()}`);if(t.nbf!==void 0&&t.nbf-(e.graceSeconds??0)>Date.now()/1e3)throw new Os(`Token can't be used before ${new Date(t.nbf*1e3).toISOString()}`);if(e.issuer!==null){if(e.issuer===void 0)throw new de("issuer must be provided or set to null explicitly");dt("Issuer",t.iss,e.issuer)}if(e.audience!==null){if(e.audience===void 0)throw new de("audience must be provided or set to null explicitly");er("Audience",t.aud,e.audience)}e.scope!=null&&er("Scope",(r=t.scope)==null?void 0:r.split(" "),e.scope)}function yo(t,e,r,n,s,i,a=_o){Nt("JWK use",i.use,"sig"),Nt("JWK kty",i.kty,"RSA"),i.alg&&Nt("JWT signature algorithm",t.alg,i.alg),Nt("JWT signature algorithm",t.alg,"RS256");let o=a(i,r.iss,t.kid);if(!(0,un.createVerify)("RSA-SHA256").update(`${e}.${n}`).verify(o,s,"base64"))throw new Rs("Invalid signature")}async function rf(t,e,r,n=ao,s){let{header:i,headerB64:a,payload:o,payloadB64:u,signatureB64:l}=t;Ms(o,r);let f=await n(e,t);return yo(i,a,o,u,l,f,s),r.customJwtCheck&&await r.customJwtCheck({header:i,payload:o,jwk:f}),o}function nf(t,e,r,n){let{header:s,headerB64:i,payload:a,payloadB64:o,signatureB64:u}=t;Ms(a,r);let l;if(co(e))l=e;else if(uo(e)){let f=e.keys.find(h=>h.kid===s.kid);if(!f)throw new bt(`JWK for kid ${s.kid} not found in the JWKS`);l=f}else throw new de([`Expected a valid JWK or JWKS (parsed as JavaScript object), but received: ${e}.`,"If you're passing a JWKS URI, use the async verify() method instead, it will download and parse the JWKS for you"].join());if(yo(s,i,a,o,u,l,n),r.customJwtCheck){let f=r.customJwtCheck({header:s,payload:a,jwk:l});if(f!==void 0&&f instanceof Promise)throw new de("Custom JWT checks must be synchronous but a promise was returned")}return a}var Us=class{constructor(e,r=new Ds){if(this.jwksCache=r,this.issuersConfig=new Map,this.publicKeyCache=new go,Array.isArray(e)){if(!e.length)throw new de("Provide at least one issuer configuration");for(let n of e){if(this.issuersConfig.has(n.issuer))throw new de(`issuer ${n.issuer} supplied multiple times`);this.issuersConfig.set(n.issuer,this.withJwksUri(n))}}else this.issuersConfig.set(e.issuer,this.withJwksUri(e))}get expectedIssuers(){return Array.from(this.issuersConfig.keys())}getIssuerConfig(e){if(!e){if(this.issuersConfig.size!==1)throw new de("issuer must be provided");e=this.issuersConfig.keys().next().value}let r=this.issuersConfig.get(e);if(!r)throw new de(`issuer not configured: ${e}`);return r}cacheJwks(...e){let r=this.getIssuerConfig(e[1]);this.jwksCache.addJwks(r.jwksUri,e[0]),this.publicKeyCache.clearCache(r.issuer)}async hydrate(){let e=this.expectedIssuers.map(r=>this.getIssuerConfig(r).jwksUri).map(r=>this.jwksCache.getJwks(r));await Promise.all(e)}verifySync(...e){let{decomposedJwt:r,jwksUri:n,verifyProperties:s}=this.getVerifyParameters(e[0],e[1]),i=this.jwksCache.getCachedJwk(n,r);return nf(r,i,s,this.publicKeyCache.transformJwkToKeyObject.bind(this.publicKeyCache))}async verify(...e){let{decomposedJwt:r,jwksUri:n,verifyProperties:s}=this.getVerifyParameters(e[0],e[1]);return rf(r,n,s,this.jwksCache.getJwk.bind(this.jwksCache),this.publicKeyCache.transformJwkToKeyObject.bind(this.publicKeyCache))}getVerifyParameters(e,r){let n=ho(e);if(!n.payload.iss)throw new Cs("JWT payload does not have iss claim");dt("Issuer",n.payload.iss,this.expectedIssuers);let s=this.getIssuerConfig(n.payload.iss);return{decomposedJwt:n,jwksUri:s.jwksUri,verifyProperties:P(P({},s),r)}}withJwksUri(e){if(e.jwksUri)return e;let r=new xs.URL(e.issuer);return P({jwksUri:new xs.URL((0,mo.join)(r.pathname,"/.well-known/jwks.json"),e.issuer).href},e)}};var _o=t=>(0,un.createPublicKey)({key:po(Buffer.from(t.n,"base64"),Buffer.from(t.e,"base64")),format:"der",type:"spki"}),go=class{constructor(e=_o){this.jwkToKeyObjectTransformer=e,this.publicKeys=new Map}transformJwkToKeyObject(e,r){var a;if(!r)return this.jwkToKeyObjectTransformer(e);let n=(a=this.publicKeys.get(r))==null?void 0:a.get(e.kid);if(n)return n;let s=this.jwkToKeyObjectTransformer(e),i=this.publicKeys.get(r);return i?i.set(e.kid,s):this.publicKeys.set(r,new Map([[e.kid,s]])),s}clearCache(e){this.publicKeys.delete(e)}};function vo(t,e){if(e.groups!=null&&er("Cognito group",t["cognito:groups"],e.groups),dt("Token use",t.token_use,["id","access"]),e.tokenUse!==null){if(e.tokenUse===void 0)throw new de("tokenUse must be provided or set to null explicitly");Nt("Token use",t.token_use,e.tokenUse)}if(e.clientId!==null){if(e.clientId===void 0)throw new de("clientId must be provided or set to null explicitly");t.token_use==="id"?dt('Client ID ("audience")',t.aud,e.clientId):dt("Client ID",t.client_id,e.clientId)}}var ft=class extends Us{constructor(e,r){let n=Array.isArray(e)?e.map(s=>ee(P(P({},s),ft.parseUserPoolId(s.userPoolId)),{audience:null})):ee(P(P({},e),ft.parseUserPoolId(e.userPoolId)),{audience:null});super(n,r)}static parseUserPoolId(e){let r=e.match(/^(?<region>(\w+-)?\w+-\w+-\d)+_\w+$/);if(!r)throw new de(`Invalid Cognito User Pool ID: ${e}`);let s=`https://cognito-idp.${r.groups.region}.amazonaws.com/${e}`;return{issuer:s,jwksUri:`${s}/.well-known/jwks.json`}}static create(e,r){return new this(e,r==null?void 0:r.jwksCache)}verifySync(...e){let r=super.verifySync(...e),n=this.getIssuerConfig(r.iss),s=P(P({},n),e[1]);return vo(r,s),r}async verify(...e){let r=await super.verify(...e),n=this.getIssuerConfig(r.iss),s=P(P({},n),e[1]);return vo(r,s),r}cacheJwks(...e){let r;if(e[1]!==void 0)r=ft.parseUserPoolId(e[1]).issuer;else if(this.expectedIssuers.length>1)throw new de("userPoolId must be provided");let n=this.getIssuerConfig(r);super.cacheJwks(e[0],n.issuer)}};var wo={"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*","Access-Control-Allow-Credentials":!0,"Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,OPTIONS"};async function $o(t,e,r,n){try{let s=await e(t,r);return{statusCode:200,headers:n??wo,body:typeof s=="string"?s:JSON.stringify(s)}}catch(s){console.error(s);let i={success:!1,error:""};s instanceof Error&&(i.error=`${s.name}: ${s.message}`);let a=typeof s=="string"?s:s instanceof Error?JSON.stringify(i):JSON.stringify(s);return{statusCode:s.statusCode??500,headers:wo,body:a}}}var Pu=ro(Ru());var Ou=10,w0={maxAttempts:Ou,retryStrategy:new Pu.StandardRetryStrategy(async()=>Ou)};function Cu(t){let e=[];for(let r of t)process.env[r]||e.push(r);if(e.length>0)throw new Error(`Unset environment variables required to execute lambda.

${e.join(" ")}
`)}var id=ro(sd()),Te=new id.default({allErrors:!0});var Og={type:"object",additionalProperties:!1,required:["email","phoneNumber"],properties:{email:{type:"string"},phoneNumber:{type:"string"},firstName:{type:"string"},lastName:{type:"string"},address:{type:"object",additionalProperties:!1,required:["line1","line2","city","state","zip","country"],properties:{line1:{type:"string"},line2:{type:"string",nullable:!0},city:{type:"string"},state:{type:"string"},zip:{type:"string",nullable:!0},country:{type:"string"}}}}},Cg={type:"object",additionalProperties:!1,required:["input"],properties:{input:{required:["userId"],properties:{userId:{type:"string"}}}}},Ng={type:"object",additionalProperties:!1,required:["input"],properties:{input:{type:"object",additionalProperties:!1,required:["accessToken","previousPassword","proposedPassword"],properties:{accessToken:{type:"string"},previousPassword:{type:"string"},proposedPassword:{type:"string"}}}}},Ig={type:"object",additionalProperties:!1,required:["input"],properties:{input:{type:"object",additionalProperties:!1,required:["appClientId","username","proposedPassword","confirmationCode"],properties:{appClientId:{type:"string"},username:{type:"string"},proposedPassword:{type:"string"},confirmationCode:{type:"string"}}}}},Ag={type:"object",additionalProperties:!1,required:["input"],properties:{input:{type:"object",additionalProperties:!1,required:["appClientId","username","confirmationCode","birthdate"],properties:{appClientId:{type:"string"},username:{type:"string"},confirmationCode:{type:"string"},birthdate:{type:"string"}}}}},kg={type:"object",additionalProperties:!1,required:["input"],properties:{input:{type:"object",additionalProperties:!1,required:["appClientId","username"],properties:{appClientId:{type:"string"},username:{type:"string"}}}}},Dg={type:"object",additionalProperties:!1,required:["input"],properties:{input:{type:"object",additionalProperties:!1,required:["appClientId","username","password"],properties:{appClientId:{type:"string"},username:{type:"string"},password:{type:"string"}}}}},qg={type:"object",additionalProperties:!1,required:["input"],properties:{input:{type:"object",additionalProperties:!1,required:["accessToken"],properties:{accessToken:{type:"string"}}}}},jg={type:"object",additionalProperties:!1,required:["input"],properties:{input:{type:"object",additionalProperties:!1,required:["appClientId","refreshToken"],properties:{appClientId:{type:"string"},refreshToken:{type:"string"}}}}},Mg={type:"object",additionalProperties:!1,required:["input"],properties:{input:{type:"object",additionalProperties:!1,required:["appClientId","username"],properties:{appClientId:{type:"string"},username:{type:"string"}}}}},xg={type:"object",additionalProperties:!1,required:["input"],properties:{input:{type:"object",additionalProperties:!1,required:["appClientId","username","password"],properties:{appClientId:{type:"string"},username:{type:"string"},password:{type:"string"}}}}},Ug={type:"object",additionalProperties:!1,required:["input"],properties:{input:{type:"object",additionalProperties:!1,required:[],properties:{email:{type:"string"},phoneNumber:{type:"string"},firstName:{type:"string"},lastName:{type:"string"},address:{type:"object",additionalProperties:!1,required:[],properties:{line1:{type:"string"},line2:{type:"string"},city:{type:"string"},state:{type:"string"},zip:{type:"string"},country:{type:"string"}}}}}}},Fg={type:"object",additionalProperties:!1,required:["input"],properties:{input:{type:"object",additionalProperties:!1,required:["appClientId","accessToken"],properties:{appClientId:{type:"string"},accessToken:{type:"string"}}}}},Aw=Te.compile(Og),kw=Te.compile(Cg),Dw=Te.compile(Ng),qw=Te.compile(Ig),jw=Te.compile(Ag),Mw=Te.compile(kg),xw=Te.compile(Dg),Uw=Te.compile(qg),Fw=Te.compile(jg),Vw=Te.compile(Mg),Jw=Te.compile(xg),Lw=Te.compile(Ug),Pa=Te.compile(Fg);var{userPoolId:Vg=""}=process.env,Jg=async t=>{Cu(["userPoolId"]);let e=JSON.parse(t.body??"{}");if(!Pa(e))throw{success:!1,validationErrors:Pa.errors??[],statusCode:400};let{accessToken:n,appClientId:s}=e.input;return await ft.create({userPoolId:Vg,clientId:s,tokenUse:"access"}).verify(n).catch(a=>{throw{success:!1,statusCode:400,message:"invalid token",error:a}}),{success:!0}};async function Lg(t){console.log("Event:",JSON.stringify(t));let e=await $o(t,Jg);return console.log("Response:",e),e}module.exports=Kd(Bg);0&&(module.exports={handler});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
